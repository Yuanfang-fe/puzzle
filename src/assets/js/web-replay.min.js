var webReplay = function (e) {
    "use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t, n = function () { return (n = Object.assign || function (e) { for (var t, n = 1, r = arguments.length; n < r; n++)for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }; function r(e) { var t = "function" == typeof Symbol && Symbol.iterator, n = t && e[t], r = 0; if (n) return n.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") } function i(e, t) { var n = "function" == typeof Symbol && e[Symbol.iterator]; if (!n) return e; var r, i, a = n.call(e), o = []; try { for (; (void 0 === t || t-- > 0) && !(r = a.next()).done;)o.push(r.value) } catch (e) { i = { error: e } } finally { try { r && !r.done && (n = a.return) && n.call(a) } finally { if (i) throw i.error } } return o } function a() { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(i(arguments[t])); return e } !function (e) { e[e.Document = 0] = "Document", e[e.DocumentType = 1] = "DocumentType", e[e.Element = 2] = "Element", e[e.Text = 3] = "Text", e[e.CDATA = 4] = "CDATA", e[e.Comment = 5] = "Comment" }(t || (t = {})); var o = 1, s = RegExp("[^a-z1-6-_]"); function l(e) { try { var t = e.rules || e.cssRules; return t ? Array.from(t).reduce((function (e, t) { return e + (function (e) { return "styleSheet" in e }(n = t) ? l(n.styleSheet) || "" : n.cssText); var n }), "") : null } catch (e) { return null } } var u = /url\((?:'([^']*)'|"([^"]*)"|([^)]*))\)/gm, c = /^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/).*/, d = /^(data:)([\w\/\+\-]+);(charset=[\w-]+|base64).*,(.*)/i; function f(e, t) { return (e || "").replace(u, (function (e, n, r, i) { var a, o = n || r || i; if (!o) return e; if (!c.test(o)) return "url('" + o + "')"; if (d.test(o)) return "url(" + o + ")"; if ("/" === o[0]) return "url('" + (((a = t).indexOf("//") > -1 ? a.split("/").slice(0, 3).join("/") : a.split("/")[0]).split("?")[0] + o + "')"); var s = t.split("/"), l = o.split("/"); s.pop(); for (var u = 0, f = l; u < f.length; u++) { var h = f[u]; "." !== h && (".." === h ? s.pop() : s.push(h)) } return "url('" + s.join("/") + "')" })) } function h(e, t) { if (!t || "" === t.trim()) return t; var n = e.createElement("a"); return n.href = t, n.href } function p(e, t, n) { return "src" === t || "href" === t && n ? h(e, n) : "srcset" === t && n ? function (e, t) { return "" === t.trim() ? t : t.split(",").map((function (t) { var n = t.trimLeft().trimRight().split(" "); return 2 === n.length ? h(e, n[0]) + " " + n[1] : 1 === n.length ? "" + h(e, n[0]) : "" })).join(", ") }(e, n) : "style" === t && n ? f(n, location.href) : n } function m(e, n, r, i, a, o) { switch (void 0 === a && (a = {}), e.nodeType) { case e.DOCUMENT_NODE: return { type: t.Document, childNodes: [] }; case e.DOCUMENT_TYPE_NODE: return { type: t.DocumentType, name: e.name, publicId: e.publicId, systemId: e.systemId }; case e.ELEMENT_NODE: var u = !1; "string" == typeof r ? u = e.classList.contains(r) : e.classList.forEach((function (e) { r.test(e) && (u = !0) })); for (var c = function (e) { var t = e.toLowerCase().trim(); return s.test(t) ? "div" : t }(e.tagName), d = {}, h = 0, m = Array.from(e.attributes); h < m.length; h++) { var v = m[h], g = v.name, y = v.value; d[g] = p(n, g, y) } if ("link" === c && i) { var _, b = Array.from(n.styleSheets).find((function (t) { return t.href === e.href })); (_ = l(b)) && (delete d.rel, delete d.href, d._cssText = f(_, b.href)) } if ("style" === c && e.sheet && !(e.innerText || e.textContent || "").trim().length) (_ = l(e.sheet)) && (d._cssText = f(_, location.href)); if ("input" === c || "textarea" === c || "select" === c) { y = e.value; "radio" !== d.type && "checkbox" !== d.type && "submit" !== d.type && "button" !== d.type && y ? d.value = a[d.type] || a[c] ? "*".repeat(y.length) : y : e.checked && (d.checked = e.checked) } if ("option" === c) { var w = e.parentElement; d.value === w.value && (d.selected = e.selected) } if ("canvas" === c && o && (d.rr_dataURL = e.toDataURL()), "audio" !== c && "video" !== c || (d.rr_mediaState = e.paused ? "paused" : "played"), e.scrollLeft && (d.rr_scrollLeft = e.scrollLeft), e.scrollTop && (d.rr_scrollTop = e.scrollTop), u) { var k = e.getBoundingClientRect(), x = k.width, S = k.height; d.rr_width = x + "px", d.rr_height = S + "px" } return { type: t.Element, tagName: c, attributes: d, childNodes: [], isSVG: (T = e, "svg" === T.tagName || T instanceof SVGElement || void 0), needBlock: u }; case e.TEXT_NODE: var E = e.parentNode && e.parentNode.tagName, C = e.textContent, I = "STYLE" === E || void 0; return I && C && (C = f(C, location.href)), "SCRIPT" === E && (C = "SCRIPT_PLACEHOLDER"), { type: t.Text, textContent: C || "", isStyle: I }; case e.CDATA_SECTION_NODE: return { type: t.CDATA, textContent: "" }; case e.COMMENT_NODE: return { type: t.Comment, textContent: e.textContent || "" }; default: return !1 }var T } function v(e, n, r, i, a, s, l, u) { void 0 === a && (a = !1), void 0 === s && (s = !0); var c, d = m(e, n, i, s, l, u || !1); if (!d) return console.warn(e, "not serialized"), null; c = "__sn" in e ? e.__sn.id : o++; var f = Object.assign(d, { id: c }); e.__sn = f, r[c] = e; var h = !a; if (f.type === t.Element && (h = h && !f.needBlock, delete f.needBlock), (f.type === t.Document || f.type === t.Element) && h) for (var p = 0, g = Array.from(e.childNodes); p < g.length; p++) { var y = v(g[p], n, r, i, a, s, l, u); y && f.childNodes.push(y) } return f } var g = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//g; function y(e, t) { void 0 === t && (t = {}); var n = 1, r = 1; function i(e) { var t = e.match(/\n/g); t && (n += t.length); var i = e.lastIndexOf("\n"); r = -1 === i ? r + e.length : e.length - i } function a() { var e = { line: n, column: r }; return function (t) { return t.position = new o(e), h(), t } } var o = function (e) { this.start = e, this.end = { line: n, column: r }, this.source = t.source }; o.prototype.content = e; var s = []; function l(i) { var a = new Error(t.source + ":" + n + ":" + r + ": " + i); if (a.reason = i, a.filename = t.source, a.line = n, a.column = r, a.source = e, !t.silent) throw a; s.push(a) } function u() { return f(/^{\s*/) } function c() { return f(/^}/) } function d() { var t, n = []; for (h(), p(n); e.length && "}" !== e.charAt(0) && (t = I() || T());)!1 !== t && (n.push(t), p(n)); return n } function f(t) { var n = t.exec(e); if (n) { var r = n[0]; return i(r), e = e.slice(r.length), n } } function h() { f(/^\s*/) } function p(e) { var t; for (void 0 === e && (e = []); t = m();)!1 !== t && e.push(t), t = m(); return e } function m() { var t = a(); if ("/" === e.charAt(0) && "*" === e.charAt(1)) { for (var n = 2; "" !== e.charAt(n) && ("*" !== e.charAt(n) || "/" !== e.charAt(n + 1));)++n; if (n += 2, "" === e.charAt(n - 1)) return l("End of comment missing"); var o = e.slice(2, n - 2); return r += 2, i(o), e = e.slice(n), r += 2, t({ type: "comment", comment: o }) } } function v() { var e = f(/^([^{]+)/); if (e) return _(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g, "").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g, (function (e) { return e.replace(/,/g, "â€Œ") })).split(/\s*(?![^(]*\)),\s*/).map((function (e) { return e.replace(/\u200C/g, ",") })) } function y() { var e = a(), t = f(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/); if (t) { var n = _(t[0]); if (!f(/^:\s*/)) return l("property missing ':'"); var r = f(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/), i = e({ type: "declaration", property: n.replace(g, ""), value: r ? _(r[0]).replace(g, "") : "" }); return f(/^[;\s]*/), i } } function b() { var e, t = []; if (!u()) return l("missing '{'"); for (p(t); e = y();)!1 !== e && (t.push(e), p(t)), e = y(); return c() ? t : l("missing '}'") } function w() { for (var e, t = [], n = a(); e = f(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]), f(/^,\s*/); if (t.length) return n({ type: "keyframe", values: t, declarations: b() }) } var k, x = C("import"), S = C("charset"), E = C("namespace"); function C(e) { var t = new RegExp("^@" + e + "\\s*([^;]+);"); return function () { var n = a(), r = f(t); if (r) { var i = { type: e }; return i[e] = r[1].trim(), n(i) } } } function I() { if ("@" === e[0]) return function () { var e = a(), t = f(/^@([-\w]+)?keyframes\s*/); if (t) { var n = t[1]; if (!(t = f(/^([-\w]+)\s*/))) return l("@keyframes missing name"); var r, i = t[1]; if (!u()) return l("@keyframes missing '{'"); for (var o = p(); r = w();)o.push(r), o = o.concat(p()); return c() ? e({ type: "keyframes", name: i, vendor: n, keyframes: o }) : l("@keyframes missing '}'") } }() || function () { var e = a(), t = f(/^@media *([^{]+)/); if (t) { var n = _(t[1]); if (!u()) return l("@media missing '{'"); var r = p().concat(d()); return c() ? e({ type: "media", media: n, rules: r }) : l("@media missing '}'") } }() || function () { var e = a(), t = f(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/); if (t) return e({ type: "custom-media", name: _(t[1]), media: _(t[2]) }) }() || function () { var e = a(), t = f(/^@supports *([^{]+)/); if (t) { var n = _(t[1]); if (!u()) return l("@supports missing '{'"); var r = p().concat(d()); return c() ? e({ type: "supports", supports: n, rules: r }) : l("@supports missing '}'") } }() || x() || S() || E() || function () { var e = a(), t = f(/^@([-\w]+)?document *([^{]+)/); if (t) { var n = _(t[1]), r = _(t[2]); if (!u()) return l("@document missing '{'"); var i = p().concat(d()); return c() ? e({ type: "document", document: r, vendor: n, rules: i }) : l("@document missing '}'") } }() || function () { var e = a(); if (f(/^@page */)) { var t = v() || []; if (!u()) return l("@page missing '{'"); for (var n, r = p(); n = y();)r.push(n), r = r.concat(p()); return c() ? e({ type: "page", selectors: t, declarations: r }) : l("@page missing '}'") } }() || function () { var e = a(); if (f(/^@host\s*/)) { if (!u()) return l("@host missing '{'"); var t = p().concat(d()); return c() ? e({ type: "host", rules: t }) : l("@host missing '}'") } }() || function () { var e = a(); if (f(/^@font-face\s*/)) { if (!u()) return l("@font-face missing '{'"); for (var t, n = p(); t = y();)n.push(t), n = n.concat(p()); return c() ? e({ type: "font-face", declarations: n }) : l("@font-face missing '}'") } }() } function T() { var e = a(), t = v(); return t ? (p(), e({ type: "rule", selectors: t, declarations: b() })) : l("selector missing") } return function e(t, n) { for (var r = t && "string" == typeof t.type, i = r ? t : n, a = 0, o = Object.keys(t); a < o.length; a++) { var s = o[a], l = t[s]; Array.isArray(l) ? l.forEach((function (t) { e(t, i) })) : l && "object" == typeof l && e(l, i) } r && Object.defineProperty(t, "parent", { configurable: !0, writable: !0, enumerable: !1, value: n || null }); return t }((k = d(), { type: "stylesheet", stylesheet: { source: t.source, rules: k, parsingErrors: s } })) } function _(e) { return e ? e.replace(/^\s+|\s+$/g, "") : "" } var b = { script: "noscript", altglyph: "altGlyph", altglyphdef: "altGlyphDef", altglyphitem: "altGlyphItem", animatecolor: "animateColor", animatemotion: "animateMotion", animatetransform: "animateTransform", clippath: "clipPath", feblend: "feBlend", fecolormatrix: "feColorMatrix", fecomponenttransfer: "feComponentTransfer", fecomposite: "feComposite", feconvolvematrix: "feConvolveMatrix", fediffuselighting: "feDiffuseLighting", fedisplacementmap: "feDisplacementMap", fedistantlight: "feDistantLight", fedropshadow: "feDropShadow", feflood: "feFlood", fefunca: "feFuncA", fefuncb: "feFuncB", fefuncg: "feFuncG", fefuncr: "feFuncR", fegaussianblur: "feGaussianBlur", feimage: "feImage", femerge: "feMerge", femergenode: "feMergeNode", femorphology: "feMorphology", feoffset: "feOffset", fepointlight: "fePointLight", fespecularlighting: "feSpecularLighting", fespotlight: "feSpotLight", fetile: "feTile", feturbulence: "feTurbulence", foreignobject: "foreignObject", glyphref: "glyphRef", lineargradient: "linearGradient", radialgradient: "radialGradient" }; var w, k, x, S, E, C = /([^\\]):hover/g; function I(e) { var t = y(e, { silent: !0 }); return t.stylesheet ? (t.stylesheet.rules.forEach((function (t) { "selectors" in t && (t.selectors || []).forEach((function (t) { if (C.test(t)) { var n = t.replace(C, "$1.\\:hover"); e = e.replace(t, t + ", " + n) } })) })), e) : e } function T(e, n, r) { switch (e.type) { case t.Document: return n.implementation.createDocument(null, "", null); case t.DocumentType: return n.implementation.createDocumentType(e.name, e.publicId, e.systemId); case t.Element: var i, a = function (e) { var t = b[e.tagName] ? b[e.tagName] : e.tagName; return "link" === t && e.attributes._cssText && (t = "style"), t }(e); i = e.isSVG ? n.createElementNS("http://www.w3.org/2000/svg", a) : n.createElement(a); var o = function (t) { if (!e.attributes.hasOwnProperty(t)) return "continue"; var o = e.attributes[t]; if (o = "boolean" == typeof o || "number" == typeof o ? "" : o, t.startsWith("rr_")) { if ("canvas" === a && "rr_dataURL" === t) { var s = document.createElement("img"); s.src = o, s.onload = function () { var e = i.getContext("2d"); e && e.drawImage(s, 0, 0, s.width, s.height) } } if ("rr_width" === t && (i.style.width = o), "rr_height" === t && (i.style.height = o), "rr_mediaState" === t) switch (o) { case "played": i.play(); case "paused": i.pause() } } else { var l = "textarea" === a && "value" === t, u = "style" === a && "_cssText" === t; if (u && r && (o = I(o)), l || u) { for (var c = n.createTextNode(o), d = 0, f = Array.from(i.childNodes); d < f.length; d++) { var h = f[d]; h.nodeType === i.TEXT_NODE && i.removeChild(h) } return i.appendChild(c), "continue" } try { e.isSVG && "xlink:href" === t ? i.setAttributeNS("http://www.w3.org/1999/xlink", t, o) : "onload" === t || "onclick" === t || "onmouse" === t.substring(0, 7) ? i.setAttribute("_" + t, o) : i.setAttribute(t, o) } catch (e) { } } }; for (var s in e.attributes) o(s); return i; case t.Text: return n.createTextNode(e.isStyle && r ? I(e.textContent) : e.textContent); case t.CDATA: return n.createCDATASection(e.textContent); case t.Comment: return n.createComment(e.textContent); default: return null } } function N(e, n, r, i, a) { void 0 === i && (i = !1), void 0 === a && (a = !0); var o = T(e, n, a); if (!o) return null; if (e.type === t.Document && (n.close(), n.open(), o = n), o.__sn = e, r[e.id] = o, (e.type === t.Document || e.type === t.Element) && !i) for (var s = 0, l = e.childNodes; s < l.length; s++) { var u = l[s], c = N(u, n, r, !1, a); c ? o.appendChild(c) : console.warn("Failed to rebuild", u) } return o } function M(e, n, r, i) { void 0 === i && (i = !0); var a = {}, o = N(e, n, a, !1, i); return function (e, t) { for (var n in e) e[n] && (r = e[n], t(r)); var r }(a, (function (e) { r && r(e), function (e) { var n = e.__sn; if (n.type === t.Element) { var r = e; for (var i in n.attributes) if (n.attributes.hasOwnProperty(i) && i.startsWith("rr_")) { var a = n.attributes[i]; "rr_scrollLeft" === i && (r.scrollLeft = a), "rr_scrollTop" === i && (r.scrollTop = a) } } }(e) })), [o, a] } function A(e, t, n) { void 0 === n && (n = document); var r = { capture: !0, passive: !0 }; return n.addEventListener(e, t, r), function () { return n.removeEventListener(e, t, r) } } (w = e.EventType || (e.EventType = {}))[w.DomContentLoaded = 0] = "DomContentLoaded", w[w.Load = 1] = "Load", w[w.FullSnapshot = 2] = "FullSnapshot", w[w.IncrementalSnapshot = 3] = "IncrementalSnapshot", w[w.Meta = 4] = "Meta", w[w.Custom = 5] = "Custom", (k = e.IncrementalSource || (e.IncrementalSource = {}))[k.Mutation = 0] = "Mutation", k[k.MouseMove = 1] = "MouseMove", k[k.MouseInteraction = 2] = "MouseInteraction", k[k.Scroll = 3] = "Scroll", k[k.ViewportResize = 4] = "ViewportResize", k[k.Input = 5] = "Input", k[k.TouchMove = 6] = "TouchMove", k[k.MediaInteraction = 7] = "MediaInteraction", k[k.StyleSheetRule = 8] = "StyleSheetRule", k[k.CanvasMutation = 9] = "CanvasMutation", (x = e.MouseInteractions || (e.MouseInteractions = {}))[x.MouseUp = 0] = "MouseUp", x[x.MouseDown = 1] = "MouseDown", x[x.Click = 2] = "Click", x[x.ContextMenu = 3] = "ContextMenu", x[x.DblClick = 4] = "DblClick", x[x.Focus = 5] = "Focus", x[x.Blur = 6] = "Blur", x[x.TouchStart = 7] = "TouchStart", x[x.TouchMove_Departed = 8] = "TouchMove_Departed", x[x.TouchEnd = 9] = "TouchEnd", function (e) { e[e.Play = 0] = "Play", e[e.Pause = 1] = "Pause" }(S || (S = {})), (E = e.ReplayerEvents || (e.ReplayerEvents = {})).Start = "start", E.Pause = "pause", E.Resume = "resume", E.Resize = "resize", E.Finish = "finish", E.FullsnapshotRebuilded = "fullsnapshot-rebuilded", E.LoadStylesheetStart = "load-stylesheet-start", E.LoadStylesheetEnd = "load-stylesheet-end", E.SkipStart = "skip-start", E.SkipEnd = "skip-end", E.MouseInteraction = "mouse-interaction", E.EventCast = "event-cast", E.CustomEvent = "custom-event", E.Flush = "flush", E.StateChange = "state-change"; var z = { map: {}, getId: function (e) { return e.__sn ? e.__sn.id : -1 }, getNode: function (e) { return z.map[e] || null }, removeNodeFromMap: function (e) { var t = e.__sn && e.__sn.id; delete z.map[t], e.childNodes && e.childNodes.forEach((function (e) { return z.removeNodeFromMap(e) })) }, has: function (e) { return z.map.hasOwnProperty(e) } }; function R(e, t, n) { void 0 === n && (n = {}); var r = null, i = 0; return function (a) { var o = Date.now(); i || !1 !== n.leading || (i = o); var s = t - (o - i), l = this, u = arguments; s <= 0 || s > t ? (r && (window.clearTimeout(r), r = null), i = o, e.apply(l, u)) : r || !1 === n.trailing || (r = window.setTimeout((function () { i = !1 === n.leading ? 0 : Date.now(), r = null, e.apply(l, u) }), s)) } } function O(e, t, n, r, i) { void 0 === i && (i = window); var a = i.Object.getOwnPropertyDescriptor(e, t); return i.Object.defineProperty(e, t, r ? n : { set: function (e) { var t = this; setTimeout((function () { n.set.call(t, e) }), 0), a && a.set && a.set.call(this, e) } }), function () { return O(e, t, a || {}, !0) } } function D(e, t, n) { try { if (!(t in e)) return function () { }; var r = e[t], i = n(r); return "function" == typeof i && (i.prototype = i.prototype || {}, Object.defineProperties(i, { __webReplay_original__: { enumerable: !1, value: r } })), e[t] = i, function () { e[t] = r } } catch (e) { return function () { } } } function L() { return window.innerHeight || document.documentElement && document.documentElement.clientHeight || document.body && document.body.clientHeight } function B() { return window.innerWidth || document.documentElement && document.documentElement.clientWidth || document.body && document.body.clientWidth } function F(e, t) { if (!e) return !1; if (e.nodeType === e.ELEMENT_NODE) { var n = !1; return "string" == typeof t ? n = e.classList.contains(t) : e.classList.forEach((function (e) { t.test(e) && (n = !0) })), n || F(e.parentNode, t) } return e.nodeType, e.TEXT_NODE, F(e.parentNode, t) } function P(e) { var t = z.getId(e); return !z.has(t) || (!e.parentNode || e.parentNode.nodeType !== e.DOCUMENT_NODE) && (!e.parentNode || P(e.parentNode)) } function U(e) { return Boolean(e.changedTouches) } function j() { "NodeList" in window && !NodeList.prototype.forEach && (NodeList.prototype.forEach = Array.prototype.forEach) } function Z(t) { switch (t.type) { case e.EventType.DomContentLoaded: case e.EventType.Load: case e.EventType.Custom: return !1; case e.EventType.FullSnapshot: case e.EventType.Meta: return !0 }switch (t.data.source) { case e.IncrementalSource.MouseMove: case e.IncrementalSource.MouseInteraction: case e.IncrementalSource.TouchMove: case e.IncrementalSource.MediaInteraction: return !1; case e.IncrementalSource.ViewportResize: case e.IncrementalSource.StyleSheetRule: case e.IncrementalSource.Scroll: case e.IncrementalSource.Input: return !0 }return !0 } var H = function () { function t() { this.reset() } return t.prototype.add = function (e) { var t = this.indexes.get(e.parentId), n = { id: e.node.id, mutation: e, children: [], texts: [], attributes: [] }; t ? (n.parent = t, t.children[n.id] = n) : this.tree[n.id] = n, this.indexes.set(n.id, n) }, t.prototype.remove = function (e) { var t = this, n = this.indexes.get(e.parentId), r = this.indexes.get(e.id), i = function (e) { t.removeIdSet.add(e); var n = z.getNode(e); null == n || n.childNodes.forEach((function (e) { return i(e.__sn.id) })) }, a = function (n) { t.removeIdSet.add(n.id), Object.values(n.children).forEach((function (e) { return a(e) })); var r = t.indexes.get(n.id); if (r) { var i = r.parent; i && (delete r.parent, delete i.children[r.id], t.indexes.delete(e.id)) } }; r ? n ? (delete r.parent, delete n.children[r.id], this.indexes.delete(e.id), a(r)) : (delete this.tree[r.id], this.indexes.delete(r.id), a(r)) : (this.removeNodeMutations.push(e), i(e.id)) }, t.prototype.text = function (e) { var t = this.indexes.get(e.id); t ? t.texts.push(e) : this.textMutations.push(e) }, t.prototype.attribute = function (e) { var t = this.indexes.get(e.id); t ? t.attributes.push(e) : this.attributeMutations.push(e) }, t.prototype.scroll = function (e) { this.scrollMap.set(e.id, e) }, t.prototype.input = function (e) { this.inputMap.set(e.id, e) }, t.prototype.flush = function () { var t, n, i, a, o = this, s = this.tree, l = this.removeNodeMutations, u = this.textMutations, c = this.attributeMutations, d = { source: e.IncrementalSource.Mutation, removes: l, texts: u, attributes: c, adds: [] }, f = function (e, t) { t && o.removeIdSet.add(e.id), d.texts = d.texts.concat(t ? [] : e.texts).filter((function (e) { return !o.removeIdSet.has(e.id) })), d.attributes = d.attributes.concat(t ? [] : e.attributes).filter((function (e) { return !o.removeIdSet.has(e.id) })), o.removeIdSet.has(e.id) || o.removeIdSet.has(e.mutation.parentId) || t ? Object.values(e.children).forEach((function (e) { return f(e, !0) })) : (d.adds.push(e.mutation), e.children && Object.values(e.children).forEach((function (e) { return f(e, !1) }))) }; Object.values(s).forEach((function (e) { return f(e, !1) })); try { for (var h = r(this.scrollMap.keys()), p = h.next(); !p.done; p = h.next()) { var m = p.value; this.removeIdSet.has(m) && this.scrollMap.delete(m) } } catch (e) { t = { error: e } } finally { try { p && !p.done && (n = h.return) && n.call(h) } finally { if (t) throw t.error } } try { for (var v = r(this.inputMap.keys()), g = v.next(); !g.done; g = v.next()) { m = g.value; this.removeIdSet.has(m) && this.inputMap.delete(m) } } catch (e) { i = { error: e } } finally { try { g && !g.done && (a = v.return) && a.call(v) } finally { if (i) throw i.error } } var y = new Map(this.scrollMap), _ = new Map(this.inputMap); return this.reset(), { mutationData: d, scrollMap: y, inputMap: _ } }, t.prototype.reset = function () { this.tree = [], this.indexes = new Map, this.removeNodeMutations = [], this.textMutations = [], this.attributeMutations = [], this.removeIdSet = new Set, this.scrollMap = new Map, this.inputMap = new Map }, t }(), V = Object.freeze({ __proto__: null, on: A, mirror: z, throttle: R, hookSetter: O, patch: D, getWindowHeight: L, getWindowWidth: B, isBlocked: F, isAncestorRemoved: P, isTouchEvent: U, polyfill: j, needCastInSyncMode: Z, TreeIndex: H }); function Y(e) { return "__ln" in e } var X = function () { function e() { this.length = 0, this.head = null } return e.prototype.get = function (e) { if (e >= this.length) throw new Error("Position outside of list range"); for (var t = this.head, n = 0; n < e; n++)t = (null == t ? void 0 : t.next) || null; return t }, e.prototype.addNode = function (e) { var t = { value: e, previous: null, next: null }; if (e.__ln = t, e.previousSibling && Y(e.previousSibling)) { var n = e.previousSibling.__ln.next; t.next = n, t.previous = e.previousSibling.__ln, e.previousSibling.__ln.next = t, n && (n.previous = t) } else if (e.nextSibling && Y(e.nextSibling)) { n = e.nextSibling.__ln.previous; t.previous = n, t.next = e.nextSibling.__ln, e.nextSibling.__ln.previous = t, n && (n.next = t) } else this.head && (this.head.previous = t), t.next = this.head, this.head = t; this.length++ }, e.prototype.removeNode = function (e) { var t = e.__ln; this.head && (t.previous ? (t.previous.next = t.next, t.next && (t.next.previous = t.previous)) : (this.head = t.next, this.head && (this.head.previous = null)), this.length--) }, e }(), W = function (e, t) { return e + "@" + t }; function G(e) { return "__sn" in e } var K = function (e, t, n, i, a) { var o = this; this.texts = [], this.attributes = [], this.removes = [], this.adds = [], this.movedMap = {}, this.addedSet = new Set, this.movedSet = new Set, this.droppedSet = new Set, this.processMutations = function (e) { var t, n, i, a; e.forEach(o.processMutation); var s = new X, l = function (e) { var t = e.nextSibling && z.getId(e.nextSibling); return -1 === t && F(e.nextSibling, o.blockClass) && (t = null), t }, u = function (e) { if (e.parentNode) { var t = z.getId(e.parentNode), n = l(e); if (-1 === t || -1 === n) return s.addNode(e); o.adds.push({ parentId: t, nextId: n, node: v(e, document, z.map, o.blockClass, !0, o.inlineStylesheet, o.maskInputOptions, o.recordCanvas) }) } }; try { for (var c = r(o.movedSet), d = c.next(); !d.done; d = c.next())u(p = d.value) } catch (e) { t = { error: e } } finally { try { d && !d.done && (n = c.return) && n.call(c) } finally { if (t) throw t.error } } try { for (var f = r(o.addedSet), h = f.next(); !h.done; h = f.next()) { var p = h.value; $(o.droppedSet, p) || J(o.removes, p) ? $(o.movedSet, p) ? u(p) : o.droppedSet.add(p) : u(p) } } catch (e) { i = { error: e } } finally { try { h && !h.done && (a = f.return) && a.call(f) } finally { if (i) throw i.error } } for (var m = null; s.length;) { var g = null; if (m) { var y = z.getId(m.value.parentNode), _ = l(m.value); -1 !== y && -1 !== _ && (g = m) } if (!g) for (var b = s.length - 1; b >= 0; b--) { var w = s.get(b); if (y = z.getId(w.value.parentNode), _ = l(w.value), -1 !== y && -1 !== _) { g = w; break } } if (!g) break; m = g.previous, s.removeNode(g.value), u(g.value) } o.emit() }, this.emit = function () { var e = { texts: o.texts.map((function (e) { return { id: z.getId(e.node), value: e.value } })).filter((function (e) { return z.has(e.id) })), attributes: o.attributes.map((function (e) { return { id: z.getId(e.node), attributes: e.attributes } })).filter((function (e) { return z.has(e.id) })), removes: o.removes, adds: o.adds }; (e.texts.length || e.attributes.length || e.removes.length || e.adds.length) && (o.emissionCallback(e), o.texts = [], o.attributes = [], o.removes = [], o.adds = [], o.addedSet = new Set, o.movedSet = new Set, o.droppedSet = new Set, o.movedMap = {}) }, this.processMutation = function (e) { switch (e.type) { case "characterData": var t = e.target.textContent; F(e.target, o.blockClass) || t === e.oldValue || o.texts.push({ value: t, node: e.target }); break; case "attributes": if (t = e.target.getAttribute(e.attributeName), F(e.target, o.blockClass) || t === e.oldValue) return; var n = o.attributes.find((function (t) { return t.node === e.target })); n || (n = { node: e.target, attributes: {} }, o.attributes.push(n)), n.attributes[e.attributeName] = p(document, e.attributeName, t); break; case "childList": e.addedNodes.forEach((function (t) { return o.genAdds(t, e.target) })), e.removedNodes.forEach((function (t) { var n = z.getId(t), r = z.getId(e.target); F(t, o.blockClass) || F(e.target, o.blockClass) || (o.addedSet.has(t) ? (q(o.addedSet, t), o.droppedSet.add(t)) : o.addedSet.has(e.target) && -1 === n || P(e.target) || (o.movedSet.has(t) && o.movedMap[W(n, r)] ? q(o.movedSet, t) : o.removes.push({ parentId: r, id: n })), z.removeNodeFromMap(t)) })) } }, this.genAdds = function (e, t) { if (!F(e, o.blockClass)) { if (G(e)) { o.movedSet.add(e); var n = null; t && G(t) && (n = t.__sn.id), n && (o.movedMap[W(e.__sn.id, n)] = !0) } else o.addedSet.add(e), o.droppedSet.delete(e); e.childNodes.forEach((function (e) { return o.genAdds(e) })) } }, this.blockClass = t, this.inlineStylesheet = n, this.maskInputOptions = i, this.recordCanvas = a, this.emissionCallback = e }; function q(e, t) { e.delete(t), t.childNodes.forEach((function (t) { return q(e, t) })) } function J(e, t) { var n = t.parentNode; if (!n) return !1; var r = z.getId(n); return !!e.some((function (e) { return e.id === r })) || J(e, n) } function $(e, t) { var n = t.parentNode; return !!n && (!!e.has(n) || $(e, n)) } function Q(t, n, r) { if (!1 === r.mouseInteraction) return function () { }; var i = !0 === r.mouseInteraction || void 0 === r.mouseInteraction ? {} : r.mouseInteraction, a = []; return Object.keys(e.MouseInteractions).filter((function (e) { return Number.isNaN(Number(e)) && !e.endsWith("_Departed") && !1 !== i[e] })).forEach((function (r) { var i = r.toLowerCase(), o = function (r) { return function (i) { if (!F(i.target, n)) { var a = z.getId(i.target), o = U(i) ? i.changedTouches[0] : i, s = o.clientX, l = o.clientY; t({ type: e.MouseInteractions[r], id: a, x: s, y: l }) } } }(r); a.push(A(i, o)) })), function () { a.forEach((function (e) { return e() })) } } var ee, te = ["INPUT", "TEXTAREA", "SELECT"], ne = new WeakMap; function re(t, i) { void 0 === i && (i = {}), function (e, t) { var n = e.mutationCb, r = e.mousemoveCb, i = e.mouseInteractionCb, o = e.scrollCb, s = e.viewportResizeCb, l = e.inputCb, u = e.mediaInteractionCb, c = e.styleSheetRuleCb, d = e.canvasMutationCb; e.mutationCb = function () { for (var e = [], r = 0; r < arguments.length; r++)e[r] = arguments[r]; t.mutation && t.mutation.apply(t, a(e)), n.apply(void 0, a(e)) }, e.mousemoveCb = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; t.mousemove && t.mousemove.apply(t, a(e)), r.apply(void 0, a(e)) }, e.mouseInteractionCb = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; t.mouseInteraction && t.mouseInteraction.apply(t, a(e)), i.apply(void 0, a(e)) }, e.scrollCb = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; t.scroll && t.scroll.apply(t, a(e)), o.apply(void 0, a(e)) }, e.viewportResizeCb = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; t.viewportResize && t.viewportResize.apply(t, a(e)), s.apply(void 0, a(e)) }, e.inputCb = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; t.input && t.input.apply(t, a(e)), l.apply(void 0, a(e)) }, e.mediaInteractionCb = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; t.mediaInteaction && t.mediaInteaction.apply(t, a(e)), u.apply(void 0, a(e)) }, e.styleSheetRuleCb = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; t.styleSheetRule && t.styleSheetRule.apply(t, a(e)), c.apply(void 0, a(e)) }, e.canvasMutationCb = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; t.canvasMutation && t.canvasMutation.apply(t, a(e)), d.apply(void 0, a(e)) } }(t, i); var o, s, l, u, c, d, f, h = (o = t.mutationCb, s = t.blockClass, l = t.inlineStylesheet, u = t.maskInputOptions, c = t.recordCanvas, d = new K(o, s, l, u, c), (f = new MutationObserver(d.processMutations)).observe(document, { attributes: !0, attributeOldValue: !0, characterData: !0, characterDataOldValue: !0, childList: !0, subtree: !0 }), f), p = function (t, n) { if (!1 === n.mousemove) return function () { }; var r, i = "number" == typeof n.mousemove ? n.mousemove : 50, a = [], o = R((function (n) { var i = Date.now() - r; t(a.map((function (e) { return e.timeOffset -= i, e })), n ? e.IncrementalSource.TouchMove : e.IncrementalSource.MouseMove), a = [], r = null }), 500), s = R((function (e) { var t = e.target, n = U(e) ? e.changedTouches[0] : e, i = n.clientX, s = n.clientY; r || (r = Date.now()), a.push({ x: i, y: s, id: z.getId(t), timeOffset: Date.now() - r }), o(U(e)) }), i, { trailing: !1 }), l = [A("mousemove", s), A("touchmove", s)]; return function () { l.forEach((function (e) { return e() })) } }(t.mousemoveCb, t.sampling), m = Q(t.mouseInteractionCb, t.blockClass, t.sampling), v = function (e, t, n) { return A("scroll", R((function (n) { if (n.target && !F(n.target, t)) { var r = z.getId(n.target); if (n.target === document) { var i = document.scrollingElement || document.documentElement; e({ id: r, x: i.scrollLeft, y: i.scrollTop }) } else e({ id: r, x: n.target.scrollLeft, y: n.target.scrollTop }) } }), n.scroll || 100)) }(t.scrollCb, t.blockClass, t.sampling), g = function (e) { return A("resize", R((function () { var t = L(), n = B(); e({ width: Number(n), height: Number(t) }) }), 200), window) }(t.viewportResizeCb), y = function (e, t, r, i, o) { function s(e) { var n = e.target; if (n && n.tagName && !(te.indexOf(n.tagName) < 0) && !F(n, t)) { var a = n.type; if ("password" !== a && !n.classList.contains(r)) { var o = n.value, s = !1; "radio" === a || "checkbox" === a ? s = n.checked : (i[n.tagName.toLowerCase()] || i[a]) && (o = "*".repeat(o.length)), l(n, { text: o, isChecked: s }); var u = n.name; "radio" === a && u && s && document.querySelectorAll('input[type="radio"][name="' + u + '"]').forEach((function (e) { e !== n && l(e, { text: e.value, isChecked: !s }) })) } } } function l(t, r) { var i = ne.get(t); if (!i || i.text !== r.text || i.isChecked !== r.isChecked) { ne.set(t, r); var a = z.getId(t); e(n(n({}, r), { id: a })) } } var u = ("last" === o.input ? ["change"] : ["input", "change"]).map((function (e) { return A(e, s) })), c = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, "value"), d = [[HTMLInputElement.prototype, "value"], [HTMLInputElement.prototype, "checked"], [HTMLSelectElement.prototype, "value"], [HTMLTextAreaElement.prototype, "value"]]; return c && c.set && u.push.apply(u, a(d.map((function (e) { return O(e[0], e[1], { set: function () { s({ target: this }) } }) })))), function () { u.forEach((function (e) { return e() })) } }(t.inputCb, t.blockClass, t.ignoreClass, t.maskInputOptions, t.sampling), _ = function (e, t) { var n = function (n) { return function (r) { var i = r.target; i && !F(i, t) && e({ type: "play" === n ? S.Play : S.Pause, id: z.getId(i) }) } }, r = [A("play", n("play")), A("pause", n("pause"))]; return function () { r.forEach((function (e) { return e() })) } }(t.mediaInteractionCb, t.blockClass), b = function (e) { var t = CSSStyleSheet.prototype.insertRule; CSSStyleSheet.prototype.insertRule = function (n, r) { var i = z.getId(this.ownerNode); return -1 !== i && e({ id: i, adds: [{ rule: n, index: r }] }), t.apply(this, arguments) }; var n = CSSStyleSheet.prototype.deleteRule; return CSSStyleSheet.prototype.deleteRule = function (t) { var r = z.getId(this.ownerNode); return -1 !== r && e({ id: r, removes: [{ index: t }] }), n.apply(this, arguments) }, function () { CSSStyleSheet.prototype.insertRule = t, CSSStyleSheet.prototype.deleteRule = n } }(t.styleSheetRuleCb), w = t.recordCanvas ? function (e, t) { var n, i, o = Object.getOwnPropertyNames(CanvasRenderingContext2D.prototype), s = [], l = function (n) { try { if ("function" != typeof CanvasRenderingContext2D.prototype[n]) return "continue"; var r = D(CanvasRenderingContext2D.prototype, n, (function (r) { return function () { for (var i = this, o = [], s = 0; s < arguments.length; s++)o[s] = arguments[s]; return F(this.canvas, t) || setTimeout((function () { var t = a(o); "drawImage" === n && t[0] && t[0] instanceof HTMLCanvasElement && (t[0] = t[0].toDataURL()), e({ id: z.getId(i.canvas), property: n, args: t }) }), 0), r.apply(this, o) } })); s.push(r) } catch (t) { var i = O(CanvasRenderingContext2D.prototype, n, { set: function (t) { e({ id: z.getId(this.canvas), property: n, args: [t], setter: !0 }) } }); s.push(i) } }; try { for (var u = r(o), c = u.next(); !c.done; c = u.next()) { l(c.value) } } catch (e) { n = { error: e } } finally { try { c && !c.done && (i = u.return) && i.call(u) } finally { if (n) throw n.error } } return function () { s.forEach((function (e) { return e() })) } }(t.canvasMutationCb, t.blockClass) : function () { }; return function () { h.disconnect(), p(), m(), v(), g(), y(), _(), b(), w() } } function ie(e) { return n(n({}, e), { timestamp: Date.now() }) } function ae(t) { void 0 === t && (t = {}); var r = t.emit, a = t.checkoutEveryNms, o = t.checkoutEveryNth, s = t.blockClass, l = void 0 === s ? "rr-block" : s, u = t.ignoreClass, c = void 0 === u ? "rr-ignore" : u, d = t.inlineStylesheet, f = void 0 === d || d, h = t.maskAllInputs, p = t.maskInputOptions, m = t.hooks, g = t.packFn, y = t.sampling, _ = void 0 === y ? {} : y, b = t.mousemoveWait, w = t.recordCanvas, k = void 0 !== w && w; if (!r) throw new Error("emit function is required"); void 0 !== b && void 0 === _.mousemove && (_.mousemove = b); var x, S = !0 === h ? { color: !0, date: !0, "datetime-local": !0, email: !0, month: !0, number: !0, range: !0, search: !0, tel: !0, text: !0, time: !0, url: !0, week: !0, textarea: !0, select: !0 } : void 0 !== p ? p : {}; j(); var E = 0; function C(t) { var n, r, a, o; void 0 === t && (t = !1), ee(ie({ type: e.EventType.Meta, data: { href: window.location.href, width: B(), height: L() } }), t); var s = i(function (e, t, n, r, i) { void 0 === t && (t = "rr-block"), void 0 === n && (n = !0); var a = {}; return [v(e, e, a, t, !1, n, !0 === r ? { color: !0, date: !0, "datetime-local": !0, email: !0, month: !0, number: !0, range: !0, search: !0, tel: !0, text: !0, time: !0, url: !0, week: !0, textarea: !0, select: !0 } : !1 === r ? {} : r, i), a] }(document, l, f, S, k), 2), u = s[0], c = s[1]; if (!u) return console.warn("Failed to snapshot the document"); z.map = c, ee(ie({ type: e.EventType.FullSnapshot, data: { node: u, initialOffset: { left: void 0 !== window.pageXOffset ? window.pageXOffset : (null === document || void 0 === document ? void 0 : document.documentElement.scrollLeft) || (null === (r = null === (n = null === document || void 0 === document ? void 0 : document.body) || void 0 === n ? void 0 : n.parentElement) || void 0 === r ? void 0 : r.scrollLeft) || (null === document || void 0 === document ? void 0 : document.body.scrollLeft) || 0, top: void 0 !== window.pageYOffset ? window.pageYOffset : (null === document || void 0 === document ? void 0 : document.documentElement.scrollTop) || (null === (o = null === (a = null === document || void 0 === document ? void 0 : document.body) || void 0 === a ? void 0 : a.parentElement) || void 0 === o ? void 0 : o.scrollTop) || (null === document || void 0 === document ? void 0 : document.body.scrollTop) || 0 } } })) } ee = function (t, n) { if (r(g ? g(t) : t, n), t.type === e.EventType.FullSnapshot) x = t, E = 0; else if (t.type === e.EventType.IncrementalSnapshot) { E++; var i = o && E >= o, s = a && t.timestamp - x.timestamp > a; (i || s) && C(!0) } }; try { var I = []; I.push(A("DOMContentLoaded", (function () { ee(ie({ type: e.EventType.DomContentLoaded, data: {} })) }))); var T = function () { C(), I.push(re({ mutationCb: function (t) { return ee(ie({ type: e.EventType.IncrementalSnapshot, data: n({ source: e.IncrementalSource.Mutation }, t) })) }, mousemoveCb: function (t, n) { return ee(ie({ type: e.EventType.IncrementalSnapshot, data: { source: n, positions: t } })) }, mouseInteractionCb: function (t) { return ee(ie({ type: e.EventType.IncrementalSnapshot, data: n({ source: e.IncrementalSource.MouseInteraction }, t) })) }, scrollCb: function (t) { return ee(ie({ type: e.EventType.IncrementalSnapshot, data: n({ source: e.IncrementalSource.Scroll }, t) })) }, viewportResizeCb: function (t) { return ee(ie({ type: e.EventType.IncrementalSnapshot, data: n({ source: e.IncrementalSource.ViewportResize }, t) })) }, inputCb: function (t) { return ee(ie({ type: e.EventType.IncrementalSnapshot, data: n({ source: e.IncrementalSource.Input }, t) })) }, mediaInteractionCb: function (t) { return ee(ie({ type: e.EventType.IncrementalSnapshot, data: n({ source: e.IncrementalSource.MediaInteraction }, t) })) }, styleSheetRuleCb: function (t) { return ee(ie({ type: e.EventType.IncrementalSnapshot, data: n({ source: e.IncrementalSource.StyleSheetRule }, t) })) }, canvasMutationCb: function (t) { return ee(ie({ type: e.EventType.IncrementalSnapshot, data: n({ source: e.IncrementalSource.CanvasMutation }, t) })) }, blockClass: l, ignoreClass: c, maskInputOptions: S, inlineStylesheet: f, sampling: _, recordCanvas: k }, m)) }; return "interactive" === document.readyState || "complete" === document.readyState ? T() : I.push(A("load", (function () { ee(ie({ type: e.EventType.Load, data: {} })), T() }), window)), function () { I.forEach((function (e) { return e() })) } } catch (e) { console.warn(e) } } function oe(e) { return e = e || Object.create(null), { on: function (t, n) { (e[t] || (e[t] = [])).push(n) }, off: function (t, n) { e[t] && e[t].splice(e[t].indexOf(n) >>> 0, 1) }, emit: function (t, n) { (e[t] || []).slice().map((function (e) { e(n) })), (e["*"] || []).slice().map((function (e) { e(t, n) })) } } } ae.addCustomEvent = function (t, n) { if (!ee) throw new Error("please add custom event after start recording"); ee(ie({ type: e.EventType.Custom, data: { tag: t, payload: n } })) }; var se = Object.freeze({ __proto__: null, default: oe }); function le() { throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs") } function ue(e, t) { return e(t = { exports: {} }, t.exports), t.exports } var ce, de = ue((function (e, t) { e.exports = { polyfill: function () { var e = window, t = document; if (!("scrollBehavior" in t.documentElement.style) || !0 === e.__forceSmoothScrollPolyfill__) { var n, r = e.HTMLElement || e.Element, i = { scroll: e.scroll || e.scrollTo, scrollBy: e.scrollBy, elementScroll: r.prototype.scroll || s, scrollIntoView: r.prototype.scrollIntoView }, a = e.performance && e.performance.now ? e.performance.now.bind(e.performance) : Date.now, o = (n = e.navigator.userAgent, new RegExp(["MSIE ", "Trident/", "Edge/"].join("|")).test(n) ? 1 : 0); e.scroll = e.scrollTo = function () { void 0 !== arguments[0] && (!0 !== l(arguments[0]) ? p.call(e, t.body, void 0 !== arguments[0].left ? ~~arguments[0].left : e.scrollX || e.pageXOffset, void 0 !== arguments[0].top ? ~~arguments[0].top : e.scrollY || e.pageYOffset) : i.scroll.call(e, void 0 !== arguments[0].left ? arguments[0].left : "object" != typeof arguments[0] ? arguments[0] : e.scrollX || e.pageXOffset, void 0 !== arguments[0].top ? arguments[0].top : void 0 !== arguments[1] ? arguments[1] : e.scrollY || e.pageYOffset)) }, e.scrollBy = function () { void 0 !== arguments[0] && (l(arguments[0]) ? i.scrollBy.call(e, void 0 !== arguments[0].left ? arguments[0].left : "object" != typeof arguments[0] ? arguments[0] : 0, void 0 !== arguments[0].top ? arguments[0].top : void 0 !== arguments[1] ? arguments[1] : 0) : p.call(e, t.body, ~~arguments[0].left + (e.scrollX || e.pageXOffset), ~~arguments[0].top + (e.scrollY || e.pageYOffset))) }, r.prototype.scroll = r.prototype.scrollTo = function () { if (void 0 !== arguments[0]) if (!0 !== l(arguments[0])) { var e = arguments[0].left, t = arguments[0].top; p.call(this, this, void 0 === e ? this.scrollLeft : ~~e, void 0 === t ? this.scrollTop : ~~t) } else { if ("number" == typeof arguments[0] && void 0 === arguments[1]) throw new SyntaxError("Value could not be converted"); i.elementScroll.call(this, void 0 !== arguments[0].left ? ~~arguments[0].left : "object" != typeof arguments[0] ? ~~arguments[0] : this.scrollLeft, void 0 !== arguments[0].top ? ~~arguments[0].top : void 0 !== arguments[1] ? ~~arguments[1] : this.scrollTop) } }, r.prototype.scrollBy = function () { void 0 !== arguments[0] && (!0 !== l(arguments[0]) ? this.scroll({ left: ~~arguments[0].left + this.scrollLeft, top: ~~arguments[0].top + this.scrollTop, behavior: arguments[0].behavior }) : i.elementScroll.call(this, void 0 !== arguments[0].left ? ~~arguments[0].left + this.scrollLeft : ~~arguments[0] + this.scrollLeft, void 0 !== arguments[0].top ? ~~arguments[0].top + this.scrollTop : ~~arguments[1] + this.scrollTop)) }, r.prototype.scrollIntoView = function () { if (!0 !== l(arguments[0])) { var n = f(this), r = n.getBoundingClientRect(), a = this.getBoundingClientRect(); n !== t.body ? (p.call(this, n, n.scrollLeft + a.left - r.left, n.scrollTop + a.top - r.top), "fixed" !== e.getComputedStyle(n).position && e.scrollBy({ left: r.left, top: r.top, behavior: "smooth" })) : e.scrollBy({ left: a.left, top: a.top, behavior: "smooth" }) } else i.scrollIntoView.call(this, void 0 === arguments[0] || arguments[0]) } } function s(e, t) { this.scrollLeft = e, this.scrollTop = t } function l(e) { if (null === e || "object" != typeof e || void 0 === e.behavior || "auto" === e.behavior || "instant" === e.behavior) return !0; if ("object" == typeof e && "smooth" === e.behavior) return !1; throw new TypeError("behavior member of ScrollOptions " + e.behavior + " is not a valid value for enumeration ScrollBehavior.") } function u(e, t) { return "Y" === t ? e.clientHeight + o < e.scrollHeight : "X" === t ? e.clientWidth + o < e.scrollWidth : void 0 } function c(t, n) { var r = e.getComputedStyle(t, null)["overflow" + n]; return "auto" === r || "scroll" === r } function d(e) { var t = u(e, "Y") && c(e, "Y"), n = u(e, "X") && c(e, "X"); return t || n } function f(e) { for (; e !== t.body && !1 === d(e);)e = e.parentNode || e.host; return e } function h(t) { var n, r, i, o, s = (a() - t.startTime) / 468; o = s = s > 1 ? 1 : s, n = .5 * (1 - Math.cos(Math.PI * o)), r = t.startX + (t.x - t.startX) * n, i = t.startY + (t.y - t.startY) * n, t.method.call(t.scrollable, r, i), r === t.x && i === t.y || e.requestAnimationFrame(h.bind(e, t)) } function p(n, r, o) { var l, u, c, d, f = a(); n === t.body ? (l = e, u = e.scrollX || e.pageXOffset, c = e.scrollY || e.pageYOffset, d = i.scroll) : (l = n, u = n.scrollLeft, c = n.scrollTop, d = s), h({ scrollable: l, method: d, startTime: f, startX: u, startY: c, x: r, y: o }) } } } })).polyfill, fe = function () { function e(e, t) { void 0 === e && (e = []), this.timeOffset = 0, this.actions = e, this.speed = t } return e.prototype.addAction = function (e) { var t = this.findActionIndex(e); this.actions.splice(t, 0, e) }, e.prototype.addActions = function (e) { var t; (t = this.actions).push.apply(t, a(e)) }, e.prototype.start = function () { this.actions.sort((function (e, t) { return e.delay - t.delay })), this.timeOffset = 0; var e = performance.now(), t = this.actions, n = this; this.raf = requestAnimationFrame((function r(i) { for (n.timeOffset += (i - e) * n.speed, e = i; t.length;) { var a = t[0]; if (!(n.timeOffset >= a.delay)) break; t.shift(), a.doAction() } (t.length > 0 || n.liveMode) && (n.raf = requestAnimationFrame(r)) })) }, e.prototype.clear = function () { this.raf && cancelAnimationFrame(this.raf), this.actions.length = 0 }, e.prototype.setSpeed = function (e) { this.speed = e }, e.prototype.toggleLiveMode = function (e) { this.liveMode = e }, e.prototype.findActionIndex = function (e) { for (var t = 0, n = this.actions.length - 1; t <= n;) { var r = Math.floor((t + n) / 2); if (this.actions[r].delay < e.delay) t = r + 1; else { if (!(this.actions[r].delay > e.delay)) return r; n = r - 1 } } return t }, e }(); function he(t, n) { if (t.type === e.EventType.IncrementalSnapshot && t.data.source === e.IncrementalSource.MouseMove) { var r = t.data.positions[0].timeOffset, i = t.timestamp + r; return t.delay = i - n, i - n } return t.delay = t.timestamp - n, t.delay }
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */!function (e) { e[e.NotStarted = 0] = "NotStarted", e[e.Running = 1] = "Running", e[e.Stopped = 2] = "Stopped" }(ce || (ce = {})); var pe = { type: "xstate.init" }; function me(e) { return void 0 === e ? [] : [].concat(e) } function ve(e) { return { type: "xstate.assign", assignment: e } } function ge(e, t) { return "string" == typeof (e = "string" == typeof e && t && t[e] ? t[e] : e) ? { type: e } : "function" == typeof e ? { type: e.name, exec: e } : e } function ye(e) { return function (t) { return e === t } } function _e(e) { return "string" == typeof e ? { type: e } : e } function be(e, t) { return { value: e, context: t, actions: [], changed: !1, matches: ye(e) } } function we(e, t) { void 0 === t && (t = {}); var n = { config: e, _options: t, initialState: { value: e.initial, actions: me(e.states[e.initial].entry).map((function (e) { return ge(e, t.actions) })), context: e.context, matches: ye(e.initial) }, transition: function (t, r) { var i, a, o = "string" == typeof t ? { value: t, context: e.context } : t, s = o.value, l = o.context, u = _e(r), c = e.states[s]; if (c.on) { var d = me(c.on[u.type]), f = function (t) { if (void 0 === t) return { value: be(s, l) }; var r = "string" == typeof t ? { target: t } : t, i = r.target, a = void 0 === i ? s : i, o = r.actions, d = void 0 === o ? [] : o, f = r.cond, h = l; if ((void 0 === f ? function () { return !0 } : f)(l, u)) { var p = e.states[a], m = !1, v = [].concat(c.exit, d, p.entry).filter((function (e) { return e })).map((function (e) { return ge(e, n._options.actions) })).filter((function (e) { if ("xstate.assign" === e.type) { m = !0; var t = Object.assign({}, h); return "function" == typeof e.assignment ? t = e.assignment(h, u) : Object.keys(e.assignment).forEach((function (n) { t[n] = "function" == typeof e.assignment[n] ? e.assignment[n](h, u) : e.assignment[n] })), h = t, !1 } return !0 })); return { value: { value: a, context: h, actions: v, changed: a !== s || v.length > 0 || m, matches: ye(a) } } } }; try { for (var h = function (e) { var t = "function" == typeof Symbol && e[Symbol.iterator], n = 0; return t ? t.call(e) : { next: function () { return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e } } } }(d), p = h.next(); !p.done; p = h.next()) { var m = f(p.value); if ("object" == typeof m) return m.value } } catch (e) { i = { error: e } } finally { try { p && !p.done && (a = h.return) && a.call(h) } finally { if (i) throw i.error } } } return be(s, l) } }; return n } var ke = function (e, t) { return e.actions.forEach((function (n) { var r = n.exec; return r && r(e.context, t) })) }; function xe(e) { var t = e.initialState, n = ce.NotStarted, r = new Set, i = { _machine: e, send: function (i) { n === ce.Running && (t = e.transition(t, i), ke(t, _e(i)), r.forEach((function (e) { return e(t) }))) }, subscribe: function (e) { return r.add(e), e(t), { unsubscribe: function () { return r.delete(e) } } }, start: function (r) { if (r) { var a = "object" == typeof r ? r : { context: e.config.context, value: r }; t = { value: a.value, actions: [], context: a.context, matches: ye(a.value) } } return n = ce.Running, ke(t, pe), i }, stop: function () { return n = ce.Stopped, r.clear(), i }, get state() { return t }, get status() { return n } }; return i } function Se(t, i) { var a = i.getCastFn, o = i.emitter; return xe(we({ id: "player", context: t, initial: "paused", states: { playing: { on: { PAUSE: { target: "paused", actions: ["pause"] }, CAST_EVENT: { target: "playing", actions: "castEvent" }, END: { target: "paused", actions: ["resetLastPlayedEvent", "pause"] } } }, paused: { on: { PLAY: { target: "playing", actions: ["recordTimeOffset", "play"] }, CAST_EVENT: { target: "paused", actions: "castEvent" }, TO_LIVE: { target: "live", actions: ["startLive"] } } }, live: { on: { ADD_EVENT: { target: "live", actions: ["addEvent"] } } } } }, { actions: { castEvent: ve({ lastPlayedEvent: function (e, t) { return "CAST_EVENT" === t.type ? t.payload.event : e.lastPlayedEvent } }), recordTimeOffset: ve((function (e, t) { var r = e.timeOffset; return "payload" in t && "timeOffset" in t.payload && (r = t.payload.timeOffset), n(n({}, e), { timeOffset: r, baselineTime: e.events[0].timestamp + r }) })), play: function (t) { var n, i, s, l, u = t.timer, c = t.events, d = t.baselineTime, f = t.lastPlayedEvent; u.clear(); try { for (var h = r(c), p = h.next(); !p.done; p = h.next()) { he(p.value, d) } } catch (e) { n = { error: e } } finally { try { p && !p.done && (i = h.return) && i.call(h) } finally { if (n) throw n.error } } var m = function (t, n) { for (var r = t.length - 1; r >= 0; r--) { var i = t[r]; if (i.type === e.EventType.Meta && i.timestamp <= n) return t.slice(r) } return t }(c, d), v = new Array, g = function (t) { if (f && f.timestamp < d && (t.timestamp <= f.timestamp || t === f)) return "continue"; var n = t.timestamp < d; if (n && !Z(t)) return "continue"; var r = a(t, n); n ? r() : v.push({ doAction: function () { r(), o.emit(e.ReplayerEvents.EventCast, t) }, delay: t.delay }) }; try { for (var y = r(m), _ = y.next(); !_.done; _ = y.next()) { g(_.value) } } catch (e) { s = { error: e } } finally { try { _ && !_.done && (l = y.return) && l.call(y) } finally { if (s) throw s.error } } o.emit(e.ReplayerEvents.Flush), u.addActions(v), u.start() }, pause: function (e) { e.timer.clear() }, resetLastPlayedEvent: ve((function (e) { return n(n({}, e), { lastPlayedEvent: null }) })), startLive: ve({ baselineTime: function (e, t) { return e.timer.toggleLiveMode(!0), e.timer.start(), "TO_LIVE" === t.type && t.payload.baselineTime ? t.payload.baselineTime : Date.now() } }), addEvent: ve((function (t, r) { var i = t.baselineTime, s = t.timer, l = t.events; if ("ADD_EVENT" === r.type) { var u = r.payload.event; he(u, i), l.push(u); var c = u.timestamp < i, d = a(u, c); c ? d() : s.addAction({ doAction: function () { d(), o.emit(e.ReplayerEvents.EventCast, u) }, delay: u.delay }) } return n(n({}, t), { events: l }) })) } })) } var Ee = oe || se, Ce = { speed: 1, root: document.body, loadTimeout: 0, skipInactive: !1, showWarning: !0, showDebug: !1, blockClass: "rr-block", liveMode: !1, insertStyleRules: [], triggerFocus: !0, UNSAFE_replayCanvas: !1 }, Ie = function () { function a(n, a) { var o = this; if (this.emitter = Ee(), this.legacy_missingNodeRetryMap = {}, this.imageMap = new Map, !(null == a ? void 0 : a.liveMode) && n.length < 2) throw new Error("Replayer need at least 2 events."); this.config = Object.assign({}, Ce, a), this.handleResize = this.handleResize.bind(this), this.getCastFn = this.getCastFn.bind(this), this.emitter.on(e.ReplayerEvents.Resize, this.handleResize), de(), j(), this.setupDom(), this.treeIndex = new H, this.fragmentParentMap = new Map, this.emitter.on(e.ReplayerEvents.Flush, (function () { var e, n, a, s, l, u, c = o.treeIndex.flush(), d = c.scrollMap, f = c.inputMap; try { for (var h = r(d.values()), p = h.next(); !p.done; p = h.next()) { var m = p.value; o.applyScroll(m) } } catch (t) { e = { error: t } } finally { try { p && !p.done && (n = h.return) && n.call(h) } finally { if (e) throw e.error } } try { for (var v = r(f.values()), g = v.next(); !g.done; g = v.next()) { m = g.value; o.applyInput(m) } } catch (e) { a = { error: e } } finally { try { g && !g.done && (s = v.return) && s.call(v) } finally { if (a) throw a.error } } try { for (var y = r(o.fragmentParentMap.entries()), _ = y.next(); !_.done; _ = y.next()) { var b = i(_.value, 2), w = b[0], k = b[1]; z.map[k.__sn.id] = k, k.__sn.type === t.Element && "textarea" === k.__sn.tagName && w.textContent && (k.value = w.textContent), k.appendChild(w) } } catch (e) { l = { error: e } } finally { try { _ && !_.done && (u = y.return) && u.call(y) } finally { if (l) throw l.error } } o.fragmentParentMap.clear() })); var s = new fe([], (null == a ? void 0 : a.speed) || Ce.speed); this.service = Se({ events: n.map((function (e) { return a && a.unpackFn ? a.unpackFn(e) : e })), timer: s, timeOffset: 0, baselineTime: 0, lastPlayedEvent: null }, { getCastFn: this.getCastFn, emitter: this.emitter }), this.service.start(), this.service.subscribe((function (t) { o.emitter.emit(e.ReplayerEvents.StateChange, { player: t }) })), this.speedService = xe(we({ id: "speed", context: { normalSpeed: -1, timer: s }, initial: "normal", states: { normal: { on: { FAST_FORWARD: { target: "skipping", actions: ["recordSpeed", "setSpeed"] }, SET_SPEED: { target: "normal", actions: ["setSpeed"] } } }, skipping: { on: { BACK_TO_NORMAL: { target: "normal", actions: ["restoreSpeed"] }, SET_SPEED: { target: "normal", actions: ["setSpeed"] } } } } }, { actions: { setSpeed: function (e, t) { "payload" in t && e.timer.setSpeed(t.payload.speed) }, recordSpeed: ve({ normalSpeed: function (e) { return e.timer.speed } }), restoreSpeed: function (e) { e.timer.setSpeed(e.normalSpeed) } } })), this.speedService.start(), this.speedService.subscribe((function (t) { o.emitter.emit(e.ReplayerEvents.StateChange, { speed: t }) })); var l = this.service.state.context.events.find((function (t) { return t.type === e.EventType.Meta })), u = this.service.state.context.events.find((function (t) { return t.type === e.EventType.FullSnapshot })); if (l) { var c = l.data, d = c.width, f = c.height; setTimeout((function () { o.emitter.emit(e.ReplayerEvents.Resize, { width: d, height: f }) }), 0) } u && this.rebuildFullSnapshot(u) } return Object.defineProperty(a.prototype, "timer", { get: function () { return this.service.state.context.timer }, enumerable: !1, configurable: !0 }), a.prototype.on = function (e, t) { this.emitter.on(e, t) }, a.prototype.setConfig = function (t) { var n = this; Object.keys(t).forEach((function (r) { if (n.config[r] = t[r], "speed" === r) { var i = { speed: t[r] || 1 }; n.speedService.send({ type: "SET_SPEED", payload: i }), n.emitter.emit(e.ReplayerEvents.SkipStart, i) } })), this.config.skipInactive || this.backToNormal() }, a.prototype.getMetaData = function () { var e = this.service.state.context.events[0], t = this.service.state.context.events[this.service.state.context.events.length - 1]; return { startTime: e.timestamp, endTime: t.timestamp, totalTime: t.timestamp - e.timestamp } }, a.prototype.getCurrentTime = function () { return this.timer.timeOffset + this.getTimeOffset() }, a.prototype.getTimeOffset = function () { var e = this.service.state.context; return e.baselineTime - e.events[0].timestamp }, a.prototype.play = function (t) { void 0 === t && (t = 0), this.service.state.matches("paused") || this.service.send({ type: "PAUSE" }), this.service.send({ type: "PLAY", payload: { timeOffset: t } }), this.emitter.emit(e.ReplayerEvents.Start) }, a.prototype.pause = function (t) { void 0 === t && this.service.state.matches("playing") && this.service.send({ type: "PAUSE" }), "number" == typeof t && (this.play(t), this.service.send({ type: "PAUSE" })), this.emitter.emit(e.ReplayerEvents.Pause) }, a.prototype.resume = function (t) { void 0 === t && (t = 0), console.warn("The 'resume' will be departed in 1.0. Please use 'play' method which has the same interface."), this.play(t), this.emitter.emit(e.ReplayerEvents.Resume) }, a.prototype.startLive = function (e) { this.service.send({ type: "TO_LIVE", payload: { baselineTime: e } }) }, a.prototype.addEvent = function (e) { var t = this, n = this.config.unpackFn ? this.config.unpackFn(e) : e; Promise.resolve().then((function () { return t.service.send({ type: "ADD_EVENT", payload: { event: n } }) })) }, a.prototype.enableInteract = function () { this.iframe.setAttribute("scrolling", "auto"), this.iframe.style.pointerEvents = "auto" }, a.prototype.disableInteract = function () { this.iframe.setAttribute("scrolling", "no"), this.iframe.style.pointerEvents = "none" }, a.prototype.setupDom = function () { this.wrapper = document.createElement("div"), this.wrapper.classList.add("replayer-wrapper"), this.config.root.appendChild(this.wrapper), this.mouse = document.createElement("div"), this.mouse.classList.add("replayer-mouse"), this.wrapper.appendChild(this.mouse), this.iframe = document.createElement("iframe"); var e = ["allow-same-origin"]; this.config.UNSAFE_replayCanvas && e.push("allow-scripts"), this.iframe.setAttribute("sandbox", e.join(" ")), this.disableInteract(), this.wrapper.appendChild(this.iframe) }, a.prototype.handleResize = function (e) { this.iframe.setAttribute("width", String(e.width)), this.iframe.setAttribute("height", String(e.height)) }, a.prototype.getCastFn = function (t, n) { var i, a = this; switch (void 0 === n && (n = !1), t.type) { case e.EventType.DomContentLoaded: case e.EventType.Load: break; case e.EventType.Custom: i = function () { a.emitter.emit(e.ReplayerEvents.CustomEvent, t) }; break; case e.EventType.Meta: i = function () { return a.emitter.emit(e.ReplayerEvents.Resize, { width: t.data.width, height: t.data.height }) }; break; case e.EventType.FullSnapshot: i = function () { a.rebuildFullSnapshot(t), a.iframe.contentWindow.scrollTo(t.data.initialOffset) }; break; case e.EventType.IncrementalSnapshot: i = function () { var i, o; if (a.applyIncremental(t, n), !n && (t === a.nextUserInteractionEvent && (a.nextUserInteractionEvent = null, a.backToNormal()), a.config.skipInactive && !a.nextUserInteractionEvent)) { try { for (var s = r(a.service.state.context.events), l = s.next(); !l.done; l = s.next()) { var u = l.value; if (!(u.timestamp <= t.timestamp) && a.isUserInteraction(u)) { u.delay - t.delay > 1e4 * a.speedService.state.context.timer.speed && (a.nextUserInteractionEvent = u); break } } } catch (e) { i = { error: e } } finally { try { l && !l.done && (o = s.return) && o.call(s) } finally { if (i) throw i.error } } if (a.nextUserInteractionEvent) { var c = a.nextUserInteractionEvent.delay - t.delay, d = { speed: Math.min(Math.round(c / 5e3), 360) }; a.speedService.send({ type: "FAST_FORWARD", payload: d }), a.emitter.emit(e.ReplayerEvents.SkipStart, d) } } } }return function () { i && i(), a.service.send({ type: "CAST_EVENT", payload: { event: t } }), t === a.service.state.context.events[a.service.state.context.events.length - 1] && (a.backToNormal(), a.service.send("END"), a.emitter.emit(e.ReplayerEvents.Finish)) } }, a.prototype.rebuildFullSnapshot = function (t) { if (!this.iframe.contentDocument) return console.warn("Looks like your replayer has been destroyed."); Object.keys(this.legacy_missingNodeRetryMap).length && console.warn("Found unresolved missing node map", this.legacy_missingNodeRetryMap), this.legacy_missingNodeRetryMap = {}, z.map = M(t.data.node, this.iframe.contentDocument)[1]; var n = document.createElement("style"), r = this.iframe.contentDocument, i = r.documentElement, a = r.head; i.insertBefore(n, a); for (var o, s = (o = this.config.blockClass, ["iframe, ." + o + " { background: #ccc }", "noscript { display: none !important; }"]).concat(this.config.insertStyleRules), l = 0; l < s.length; l++)n.sheet.insertRule(s[l], l); this.emitter.emit(e.ReplayerEvents.FullsnapshotRebuilded, t), this.waitForStylesheetLoad(), this.config.UNSAFE_replayCanvas && this.preloadAllImages() }, a.prototype.waitForStylesheetLoad = function () { var t, n = this, r = null === (t = this.iframe.contentDocument) || void 0 === t ? void 0 : t.head; if (r) { var i, a = new Set, o = this.service.state, s = this.service.subscribe((function (e) { o = e })).unsubscribe; r.querySelectorAll('link[rel="stylesheet"]').forEach((function (t) { t.sheet || (a.add(t), t.addEventListener("load", (function () { a.delete(t), 0 === a.size && -1 !== i && (o.matches("playing") && n.play(n.getCurrentTime()), n.emitter.emit(e.ReplayerEvents.LoadStylesheetEnd), i && window.clearTimeout(i), s()) }))) })), a.size > 0 && (this.service.send({ type: "PAUSE" }), this.emitter.emit(e.ReplayerEvents.LoadStylesheetStart), i = window.setTimeout((function () { o.matches("playing") && n.play(n.getCurrentTime()), i = -1, s() }), this.config.loadTimeout)) } }, a.prototype.preloadAllImages = function () { var t, n, i = this, a = this.service.state, o = this.service.subscribe((function (e) { a = e })).unsubscribe, s = 0, l = 0; try { for (var u = r(this.service.state.context.events), c = u.next(); !c.done; c = u.next()) { var d = c.value; if (d.type === e.EventType.IncrementalSnapshot && d.data.source === e.IncrementalSource.CanvasMutation && "drawImage" === d.data.property && "string" == typeof d.data.args[0] && !this.imageMap.has(d)) { s++; var f = document.createElement("img"); f.src = d.data.args[0], this.imageMap.set(d, f), f.onload = function () { ++l === s && (a.matches("playing") && i.play(i.getCurrentTime()), o()) } } } } catch (e) { t = { error: e } } finally { try { c && !c.done && (n = u.return) && n.call(u) } finally { if (t) throw t.error } } s !== l && this.service.send({ type: "PAUSE" }) }, a.prototype.applyIncremental = function (t, n) { var r = this, i = t.data; switch (i.source) { case e.IncrementalSource.Mutation: n && (i.adds.forEach((function (e) { return r.treeIndex.add(e) })), i.texts.forEach((function (e) { return r.treeIndex.text(e) })), i.attributes.forEach((function (e) { return r.treeIndex.attribute(e) })), i.removes.forEach((function (e) { return r.treeIndex.remove(e) }))), this.applyMutation(i, n); break; case e.IncrementalSource.MouseMove: if (n) { var a = i.positions[i.positions.length - 1]; this.moveAndHover(i, a.x, a.y, a.id) } else i.positions.forEach((function (e) { var n = { doAction: function () { r.moveAndHover(i, e.x, e.y, e.id) }, delay: e.timeOffset + t.timestamp - r.service.state.context.baselineTime }; r.timer.addAction(n) })); break; case e.IncrementalSource.MouseInteraction: if (-1 === i.id) break; var o = new Event(e.MouseInteractions[i.type].toLowerCase()); if (!(c = z.getNode(i.id))) return this.debugNodeNotFound(i, i.id); this.emitter.emit(e.ReplayerEvents.MouseInteraction, { type: i.type, target: c }); var s = this.config.triggerFocus; switch (i.type) { case e.MouseInteractions.Blur: "blur" in c && c.blur(); break; case e.MouseInteractions.Focus: s && c.focus && c.focus({ preventScroll: !0 }); break; case e.MouseInteractions.Click: case e.MouseInteractions.TouchStart: case e.MouseInteractions.TouchEnd: n || (this.moveAndHover(i, i.x, i.y, i.id), this.mouse.classList.remove("active"), this.mouse.offsetWidth, this.mouse.classList.add("active")); break; default: c.dispatchEvent(o) }break; case e.IncrementalSource.Scroll: if (-1 === i.id) break; if (n) { this.treeIndex.scroll(i); break } this.applyScroll(i); break; case e.IncrementalSource.ViewportResize: this.emitter.emit(e.ReplayerEvents.Resize, { width: i.width, height: i.height }); break; case e.IncrementalSource.Input: if (-1 === i.id) break; if (n) { this.treeIndex.input(i); break } this.applyInput(i); break; case e.IncrementalSource.MediaInteraction: if (!(c = z.getNode(i.id))) return this.debugNodeNotFound(i, i.id); var l = c; i.type === S.Pause && l.pause(), i.type === S.Play && (l.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA ? l.play() : l.addEventListener("canplay", (function () { l.play() }))); break; case e.IncrementalSource.StyleSheetRule: if (!(c = z.getNode(i.id))) return this.debugNodeNotFound(i, i.id); var u = c.sheet; i.adds && i.adds.forEach((function (e) { var t = e.rule, n = e.index, r = void 0 === n ? void 0 : Math.min(n, u.rules.length); try { u.insertRule(t, r) } catch (e) { } })), i.removes && i.removes.forEach((function (e) { var t = e.index; u.deleteRule(t) })); break; case e.IncrementalSource.CanvasMutation: if (!this.config.UNSAFE_replayCanvas) return; var c; if (!(c = z.getNode(i.id))) return this.debugNodeNotFound(i, i.id); try { var d = c.getContext("2d"); if (i.setter) return void (d[i.property] = i.args[0]); var f = d[i.property]; if ("drawImage" === i.property && "string" == typeof i.args[0]) { var h = this.imageMap.get(t); i.args[0] = h, f.apply(d, i.args) } else f.apply(d, i.args) } catch (e) { this.warnCanvasMutationFailed(i, i.id, e) } } }, a.prototype.applyMutation = function (e, t) { var r = this; e.removes.forEach((function (t) { var n = z.getNode(t.id); if (!n) return r.warnNodeNotFound(e, t.id); var i = z.getNode(t.parentId); if (!i) return r.warnNodeNotFound(e, t.parentId); if (z.removeNodeFromMap(n), i) { var a = r.fragmentParentMap.get(i); a && a.contains(n) ? a.removeChild(n) : i.removeChild(n) } })); var i = n({}, this.legacy_missingNodeRetryMap), a = [], o = function (e) { if (!r.iframe.contentDocument) return console.warn("Looks like your replayer has been destroyed."); var n = z.getNode(e.parentId); if (!n) return a.push(e); var o = r.iframe.contentDocument.contains(n); if (t && o) { var s = document.createDocumentFragment(); for (z.map[e.parentId] = s, r.fragmentParentMap.set(s, n); n.firstChild;)s.appendChild(n.firstChild); n = s } var l = null, u = null; if (e.previousId && (l = z.getNode(e.previousId)), e.nextId && (u = z.getNode(e.nextId)), null !== e.nextId && -1 !== e.nextId && !u) return a.push(e); var c = N(e.node, r.iframe.contentDocument, z.map, !0); -1 !== e.previousId && -1 !== e.nextId ? (l && l.nextSibling && l.nextSibling.parentNode ? n.insertBefore(c, l.nextSibling) : u && u.parentNode ? n.contains(u) ? n.insertBefore(c, u) : n.insertBefore(c, null) : n.appendChild(c), (e.previousId || e.nextId) && r.legacy_resolveMissingNode(i, n, c, e)) : i[e.node.id] = { node: c, mutation: e } }; for (e.adds.forEach((function (e) { o(e) })); a.length;) { if (a.every((function (e) { return !Boolean(z.getNode(e.parentId)) }))) return a.forEach((function (t) { return r.warnNodeNotFound(e, t.node.id) })); var s = a.shift(); o(s) } Object.keys(i).length && Object.assign(this.legacy_missingNodeRetryMap, i), e.texts.forEach((function (t) { var n = z.getNode(t.id); if (!n) return r.warnNodeNotFound(e, t.id); r.fragmentParentMap.has(n) && (n = r.fragmentParentMap.get(n)), n.textContent = t.value })), e.attributes.forEach((function (t) { var n = z.getNode(t.id); if (!n) return r.warnNodeNotFound(e, t.id); for (var i in r.fragmentParentMap.has(n) && (n = r.fragmentParentMap.get(n)), t.attributes) if ("string" == typeof i) { var a = t.attributes[i]; null !== a ? n.setAttribute(i, a) : n.removeAttribute(i) } })) }, a.prototype.applyScroll = function (e) { var t = z.getNode(e.id); if (!t) return this.debugNodeNotFound(e, e.id); if (t === this.iframe.contentDocument) this.iframe.contentWindow.scrollTo({ top: e.y, left: e.x, behavior: "smooth" }); else try { t.scrollTop = e.y, t.scrollLeft = e.x } catch (e) { } }, a.prototype.applyInput = function (e) { var t = z.getNode(e.id); if (!t) return this.debugNodeNotFound(e, e.id); try { t.checked = e.isChecked, t.value = e.text } catch (e) { } }, a.prototype.legacy_resolveMissingNode = function (e, t, n, r) { var i = r.previousId, a = r.nextId, o = i && e[i], s = a && e[a]; if (o) { var l = o, u = l.node, c = l.mutation; t.insertBefore(u, n), delete e[c.node.id], delete this.legacy_missingNodeRetryMap[c.node.id], (c.previousId || c.nextId) && this.legacy_resolveMissingNode(e, t, u, c) } if (s) { var d = s; u = d.node, c = d.mutation; t.insertBefore(u, n.nextSibling), delete e[c.node.id], delete this.legacy_missingNodeRetryMap[c.node.id], (c.previousId || c.nextId) && this.legacy_resolveMissingNode(e, t, u, c) } }, a.prototype.moveAndHover = function (e, t, n, r) { this.mouse.style.left = t + "px", this.mouse.style.top = n + "px"; var i = z.getNode(r); if (!i) return this.debugNodeNotFound(e, r); this.hoverElements(i) }, a.prototype.hoverElements = function (e) { var t; null === (t = this.iframe.contentDocument) || void 0 === t || t.querySelectorAll(".\\:hover").forEach((function (e) { e.classList.remove(":hover") })); for (var n = e; n;)n.classList && n.classList.add(":hover"), n = n.parentElement }, a.prototype.isUserInteraction = function (t) { return t.type === e.EventType.IncrementalSnapshot && (t.data.source > e.IncrementalSource.Mutation && t.data.source <= e.IncrementalSource.Input) }, a.prototype.backToNormal = function () { this.nextUserInteractionEvent = null, this.speedService.state.matches("normal") || (this.speedService.send({ type: "BACK_TO_NORMAL" }), this.emitter.emit(e.ReplayerEvents.SkipEnd, { speed: this.speedService.state.context.normalSpeed })) }, a.prototype.warnNodeNotFound = function (e, t) { this.config.showWarning && console.warn("[replayer]", "Node with id '" + t + "' not found in", e) }, a.prototype.warnCanvasMutationFailed = function (e, t, n) { console.warn("[replayer]", "Has error on update canvas '" + t + "'", e, n) }, a.prototype.debugNodeNotFound = function (e, t) { this.config.showDebug && console.log("[replayer]", "Node with id '" + t + "' not found in", e) }, a }(), Te = ae.addCustomEvent, Ne = ue((function (e, t) { e.exports = function e(t, n, r) { function i(o, s) { if (!n[o]) { if (!t[o]) { if (!s && le) return le(); if (a) return a(o, !0); var l = new Error("Cannot find module '" + o + "'"); throw l.code = "MODULE_NOT_FOUND", l } var u = n[o] = { exports: {} }; t[o][0].call(u.exports, (function (e) { return i(t[o][1][e] || e) }), u, u.exports, e, t, n, r) } return n[o].exports } for (var a = le, o = 0; o < r.length; o++)i(r[o]); return i }({ 1: [function (e, t, n) { var r = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array; function i(e, t) { return Object.prototype.hasOwnProperty.call(e, t) } n.assign = function (e) { for (var t = Array.prototype.slice.call(arguments, 1); t.length;) { var n = t.shift(); if (n) { if ("object" != typeof n) throw new TypeError(n + "must be non-object"); for (var r in n) i(n, r) && (e[r] = n[r]) } } return e }, n.shrinkBuf = function (e, t) { return e.length === t ? e : e.subarray ? e.subarray(0, t) : (e.length = t, e) }; var a = { arraySet: function (e, t, n, r, i) { if (t.subarray && e.subarray) e.set(t.subarray(n, n + r), i); else for (var a = 0; a < r; a++)e[i + a] = t[n + a] }, flattenChunks: function (e) { var t, n, r, i, a, o; for (r = 0, t = 0, n = e.length; t < n; t++)r += e[t].length; for (o = new Uint8Array(r), i = 0, t = 0, n = e.length; t < n; t++)a = e[t], o.set(a, i), i += a.length; return o } }, o = { arraySet: function (e, t, n, r, i) { for (var a = 0; a < r; a++)e[i + a] = t[n + a] }, flattenChunks: function (e) { return [].concat.apply([], e) } }; n.setTyped = function (e) { e ? (n.Buf8 = Uint8Array, n.Buf16 = Uint16Array, n.Buf32 = Int32Array, n.assign(n, a)) : (n.Buf8 = Array, n.Buf16 = Array, n.Buf32 = Array, n.assign(n, o)) }, n.setTyped(r) }, {}], 2: [function (e, t, n) { var r = e("./common"), i = !0, a = !0; try { String.fromCharCode.apply(null, [0]) } catch (e) { i = !1 } try { String.fromCharCode.apply(null, new Uint8Array(1)) } catch (e) { a = !1 } for (var o = new r.Buf8(256), s = 0; s < 256; s++)o[s] = s >= 252 ? 6 : s >= 248 ? 5 : s >= 240 ? 4 : s >= 224 ? 3 : s >= 192 ? 2 : 1; function l(e, t) { if (t < 65534 && (e.subarray && a || !e.subarray && i)) return String.fromCharCode.apply(null, r.shrinkBuf(e, t)); for (var n = "", o = 0; o < t; o++)n += String.fromCharCode(e[o]); return n } o[254] = o[254] = 1, n.string2buf = function (e) { var t, n, i, a, o, s = e.length, l = 0; for (a = 0; a < s; a++)55296 == (64512 & (n = e.charCodeAt(a))) && a + 1 < s && 56320 == (64512 & (i = e.charCodeAt(a + 1))) && (n = 65536 + (n - 55296 << 10) + (i - 56320), a++), l += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4; for (t = new r.Buf8(l), o = 0, a = 0; o < l; a++)55296 == (64512 & (n = e.charCodeAt(a))) && a + 1 < s && 56320 == (64512 & (i = e.charCodeAt(a + 1))) && (n = 65536 + (n - 55296 << 10) + (i - 56320), a++), n < 128 ? t[o++] = n : n < 2048 ? (t[o++] = 192 | n >>> 6, t[o++] = 128 | 63 & n) : n < 65536 ? (t[o++] = 224 | n >>> 12, t[o++] = 128 | n >>> 6 & 63, t[o++] = 128 | 63 & n) : (t[o++] = 240 | n >>> 18, t[o++] = 128 | n >>> 12 & 63, t[o++] = 128 | n >>> 6 & 63, t[o++] = 128 | 63 & n); return t }, n.buf2binstring = function (e) { return l(e, e.length) }, n.binstring2buf = function (e) { for (var t = new r.Buf8(e.length), n = 0, i = t.length; n < i; n++)t[n] = e.charCodeAt(n); return t }, n.buf2string = function (e, t) { var n, r, i, a, s = t || e.length, u = new Array(2 * s); for (r = 0, n = 0; n < s;)if ((i = e[n++]) < 128) u[r++] = i; else if ((a = o[i]) > 4) u[r++] = 65533, n += a - 1; else { for (i &= 2 === a ? 31 : 3 === a ? 15 : 7; a > 1 && n < s;)i = i << 6 | 63 & e[n++], a--; a > 1 ? u[r++] = 65533 : i < 65536 ? u[r++] = i : (i -= 65536, u[r++] = 55296 | i >> 10 & 1023, u[r++] = 56320 | 1023 & i) } return l(u, r) }, n.utf8border = function (e, t) { var n; for ((t = t || e.length) > e.length && (t = e.length), n = t - 1; n >= 0 && 128 == (192 & e[n]);)n--; return n < 0 || 0 === n ? t : n + o[e[n]] > t ? n : t } }, { "./common": 1 }], 3: [function (e, t, n) { t.exports = function (e, t, n, r) { for (var i = 65535 & e | 0, a = e >>> 16 & 65535 | 0, o = 0; 0 !== n;) { n -= o = n > 2e3 ? 2e3 : n; do { a = a + (i = i + t[r++] | 0) | 0 } while (--o); i %= 65521, a %= 65521 } return i | a << 16 | 0 } }, {}], 4: [function (e, t, n) { var r = function () { for (var e, t = [], n = 0; n < 256; n++) { e = n; for (var r = 0; r < 8; r++)e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1; t[n] = e } return t }(); t.exports = function (e, t, n, i) { var a = r, o = i + n; e ^= -1; for (var s = i; s < o; s++)e = e >>> 8 ^ a[255 & (e ^ t[s])]; return -1 ^ e } }, {}], 5: [function (e, t, n) { var r, i = e("../utils/common"), a = e("./trees"), o = e("./adler32"), s = e("./crc32"), l = e("./messages"); function u(e, t) { return e.msg = l[t], t } function c(e) { return (e << 1) - (e > 4 ? 9 : 0) } function d(e) { for (var t = e.length; --t >= 0;)e[t] = 0 } function f(e) { var t = e.state, n = t.pending; n > e.avail_out && (n = e.avail_out), 0 !== n && (i.arraySet(e.output, t.pending_buf, t.pending_out, n, e.next_out), e.next_out += n, t.pending_out += n, e.total_out += n, e.avail_out -= n, t.pending -= n, 0 === t.pending && (t.pending_out = 0)) } function h(e, t) { a._tr_flush_block(e, e.block_start >= 0 ? e.block_start : -1, e.strstart - e.block_start, t), e.block_start = e.strstart, f(e.strm) } function p(e, t) { e.pending_buf[e.pending++] = t } function m(e, t) { e.pending_buf[e.pending++] = t >>> 8 & 255, e.pending_buf[e.pending++] = 255 & t } function v(e, t) { var n, r, i = e.max_chain_length, a = e.strstart, o = e.prev_length, s = e.nice_match, l = e.strstart > e.w_size - 262 ? e.strstart - (e.w_size - 262) : 0, u = e.window, c = e.w_mask, d = e.prev, f = e.strstart + 258, h = u[a + o - 1], p = u[a + o]; e.prev_length >= e.good_match && (i >>= 2), s > e.lookahead && (s = e.lookahead); do { if (u[(n = t) + o] === p && u[n + o - 1] === h && u[n] === u[a] && u[++n] === u[a + 1]) { a += 2, n++; do { } while (u[++a] === u[++n] && u[++a] === u[++n] && u[++a] === u[++n] && u[++a] === u[++n] && u[++a] === u[++n] && u[++a] === u[++n] && u[++a] === u[++n] && u[++a] === u[++n] && a < f); if (r = 258 - (f - a), a = f - 258, r > o) { if (e.match_start = t, o = r, r >= s) break; h = u[a + o - 1], p = u[a + o] } } } while ((t = d[t & c]) > l && 0 != --i); return o <= e.lookahead ? o : e.lookahead } function g(e) { var t, n, r, a, l, u, c, d, f, h, p = e.w_size; do { if (a = e.window_size - e.lookahead - e.strstart, e.strstart >= p + (p - 262)) { i.arraySet(e.window, e.window, p, p, 0), e.match_start -= p, e.strstart -= p, e.block_start -= p, t = n = e.hash_size; do { r = e.head[--t], e.head[t] = r >= p ? r - p : 0 } while (--n); t = n = p; do { r = e.prev[--t], e.prev[t] = r >= p ? r - p : 0 } while (--n); a += p } if (0 === e.strm.avail_in) break; if (u = e.strm, c = e.window, d = e.strstart + e.lookahead, f = a, h = void 0, (h = u.avail_in) > f && (h = f), n = 0 === h ? 0 : (u.avail_in -= h, i.arraySet(c, u.input, u.next_in, h, d), 1 === u.state.wrap ? u.adler = o(u.adler, c, h, d) : 2 === u.state.wrap && (u.adler = s(u.adler, c, h, d)), u.next_in += h, u.total_in += h, h), e.lookahead += n, e.lookahead + e.insert >= 3) for (l = e.strstart - e.insert, e.ins_h = e.window[l], e.ins_h = (e.ins_h << e.hash_shift ^ e.window[l + 1]) & e.hash_mask; e.insert && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[l + 3 - 1]) & e.hash_mask, e.prev[l & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = l, l++, e.insert--, !(e.lookahead + e.insert < 3));); } while (e.lookahead < 262 && 0 !== e.strm.avail_in) } function y(e, t) { for (var n, r; ;) { if (e.lookahead < 262) { if (g(e), e.lookahead < 262 && 0 === t) return 1; if (0 === e.lookahead) break } if (n = 0, e.lookahead >= 3 && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), 0 !== n && e.strstart - n <= e.w_size - 262 && (e.match_length = v(e, n)), e.match_length >= 3) if (r = a._tr_tally(e, e.strstart - e.match_start, e.match_length - 3), e.lookahead -= e.match_length, e.match_length <= e.max_lazy_match && e.lookahead >= 3) { e.match_length--; do { e.strstart++, e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart } while (0 != --e.match_length); e.strstart++ } else e.strstart += e.match_length, e.match_length = 0, e.ins_h = e.window[e.strstart], e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 1]) & e.hash_mask; else r = a._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++; if (r && (h(e, !1), 0 === e.strm.avail_out)) return 1 } return e.insert = e.strstart < 2 ? e.strstart : 2, 4 === t ? (h(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (h(e, !1), 0 === e.strm.avail_out) ? 1 : 2 } function _(e, t) { for (var n, r, i; ;) { if (e.lookahead < 262) { if (g(e), e.lookahead < 262 && 0 === t) return 1; if (0 === e.lookahead) break } if (n = 0, e.lookahead >= 3 && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), e.prev_length = e.match_length, e.prev_match = e.match_start, e.match_length = 2, 0 !== n && e.prev_length < e.max_lazy_match && e.strstart - n <= e.w_size - 262 && (e.match_length = v(e, n), e.match_length <= 5 && (1 === e.strategy || 3 === e.match_length && e.strstart - e.match_start > 4096) && (e.match_length = 2)), e.prev_length >= 3 && e.match_length <= e.prev_length) { i = e.strstart + e.lookahead - 3, r = a._tr_tally(e, e.strstart - 1 - e.prev_match, e.prev_length - 3), e.lookahead -= e.prev_length - 1, e.prev_length -= 2; do { ++e.strstart <= i && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask, n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart) } while (0 != --e.prev_length); if (e.match_available = 0, e.match_length = 2, e.strstart++, r && (h(e, !1), 0 === e.strm.avail_out)) return 1 } else if (e.match_available) { if ((r = a._tr_tally(e, 0, e.window[e.strstart - 1])) && h(e, !1), e.strstart++, e.lookahead--, 0 === e.strm.avail_out) return 1 } else e.match_available = 1, e.strstart++, e.lookahead-- } return e.match_available && (r = a._tr_tally(e, 0, e.window[e.strstart - 1]), e.match_available = 0), e.insert = e.strstart < 2 ? e.strstart : 2, 4 === t ? (h(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (h(e, !1), 0 === e.strm.avail_out) ? 1 : 2 } function b(e, t, n, r, i) { this.good_length = e, this.max_lazy = t, this.nice_length = n, this.max_chain = r, this.func = i } function w() { this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = 8, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new i.Buf16(1146), this.dyn_dtree = new i.Buf16(122), this.bl_tree = new i.Buf16(78), d(this.dyn_ltree), d(this.dyn_dtree), d(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new i.Buf16(16), this.heap = new i.Buf16(573), d(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new i.Buf16(573), d(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0 } function k(e) { var t; return e && e.state ? (e.total_in = e.total_out = 0, e.data_type = 2, (t = e.state).pending = 0, t.pending_out = 0, t.wrap < 0 && (t.wrap = -t.wrap), t.status = t.wrap ? 42 : 113, e.adler = 2 === t.wrap ? 0 : 1, t.last_flush = 0, a._tr_init(t), 0) : u(e, -2) } function x(e) { var t = k(e); return 0 === t && function (e) { e.window_size = 2 * e.w_size, d(e.head), e.max_lazy_match = r[e.level].max_lazy, e.good_match = r[e.level].good_length, e.nice_match = r[e.level].nice_length, e.max_chain_length = r[e.level].max_chain, e.strstart = 0, e.block_start = 0, e.lookahead = 0, e.insert = 0, e.match_length = e.prev_length = 2, e.match_available = 0, e.ins_h = 0 }(e.state), t } function S(e, t, n, r, a, o) { if (!e) return -2; var s = 1; if (-1 === t && (t = 6), r < 0 ? (s = 0, r = -r) : r > 15 && (s = 2, r -= 16), a < 1 || a > 9 || 8 !== n || r < 8 || r > 15 || t < 0 || t > 9 || o < 0 || o > 4) return u(e, -2); 8 === r && (r = 9); var l = new w; return e.state = l, l.strm = e, l.wrap = s, l.gzhead = null, l.w_bits = r, l.w_size = 1 << l.w_bits, l.w_mask = l.w_size - 1, l.hash_bits = a + 7, l.hash_size = 1 << l.hash_bits, l.hash_mask = l.hash_size - 1, l.hash_shift = ~~((l.hash_bits + 3 - 1) / 3), l.window = new i.Buf8(2 * l.w_size), l.head = new i.Buf16(l.hash_size), l.prev = new i.Buf16(l.w_size), l.lit_bufsize = 1 << a + 6, l.pending_buf_size = 4 * l.lit_bufsize, l.pending_buf = new i.Buf8(l.pending_buf_size), l.d_buf = 1 * l.lit_bufsize, l.l_buf = 3 * l.lit_bufsize, l.level = t, l.strategy = o, l.method = n, x(e) } r = [new b(0, 0, 0, 0, (function (e, t) { var n = 65535; for (n > e.pending_buf_size - 5 && (n = e.pending_buf_size - 5); ;) { if (e.lookahead <= 1) { if (g(e), 0 === e.lookahead && 0 === t) return 1; if (0 === e.lookahead) break } e.strstart += e.lookahead, e.lookahead = 0; var r = e.block_start + n; if ((0 === e.strstart || e.strstart >= r) && (e.lookahead = e.strstart - r, e.strstart = r, h(e, !1), 0 === e.strm.avail_out)) return 1; if (e.strstart - e.block_start >= e.w_size - 262 && (h(e, !1), 0 === e.strm.avail_out)) return 1 } return e.insert = 0, 4 === t ? (h(e, !0), 0 === e.strm.avail_out ? 3 : 4) : (e.strstart > e.block_start && (h(e, !1), e.strm.avail_out), 1) })), new b(4, 4, 8, 4, y), new b(4, 5, 16, 8, y), new b(4, 6, 32, 32, y), new b(4, 4, 16, 16, _), new b(8, 16, 32, 32, _), new b(8, 16, 128, 128, _), new b(8, 32, 128, 256, _), new b(32, 128, 258, 1024, _), new b(32, 258, 258, 4096, _)], n.deflateInit = function (e, t) { return S(e, t, 8, 15, 8, 0) }, n.deflateInit2 = S, n.deflateReset = x, n.deflateResetKeep = k, n.deflateSetHeader = function (e, t) { return e && e.state ? 2 !== e.state.wrap ? -2 : (e.state.gzhead = t, 0) : -2 }, n.deflate = function (e, t) { var n, i, o, l; if (!e || !e.state || t > 5 || t < 0) return e ? u(e, -2) : -2; if (i = e.state, !e.output || !e.input && 0 !== e.avail_in || 666 === i.status && 4 !== t) return u(e, 0 === e.avail_out ? -5 : -2); if (i.strm = e, n = i.last_flush, i.last_flush = t, 42 === i.status) if (2 === i.wrap) e.adler = 0, p(i, 31), p(i, 139), p(i, 8), i.gzhead ? (p(i, (i.gzhead.text ? 1 : 0) + (i.gzhead.hcrc ? 2 : 0) + (i.gzhead.extra ? 4 : 0) + (i.gzhead.name ? 8 : 0) + (i.gzhead.comment ? 16 : 0)), p(i, 255 & i.gzhead.time), p(i, i.gzhead.time >> 8 & 255), p(i, i.gzhead.time >> 16 & 255), p(i, i.gzhead.time >> 24 & 255), p(i, 9 === i.level ? 2 : i.strategy >= 2 || i.level < 2 ? 4 : 0), p(i, 255 & i.gzhead.os), i.gzhead.extra && i.gzhead.extra.length && (p(i, 255 & i.gzhead.extra.length), p(i, i.gzhead.extra.length >> 8 & 255)), i.gzhead.hcrc && (e.adler = s(e.adler, i.pending_buf, i.pending, 0)), i.gzindex = 0, i.status = 69) : (p(i, 0), p(i, 0), p(i, 0), p(i, 0), p(i, 0), p(i, 9 === i.level ? 2 : i.strategy >= 2 || i.level < 2 ? 4 : 0), p(i, 3), i.status = 113); else { var v = 8 + (i.w_bits - 8 << 4) << 8; v |= (i.strategy >= 2 || i.level < 2 ? 0 : i.level < 6 ? 1 : 6 === i.level ? 2 : 3) << 6, 0 !== i.strstart && (v |= 32), v += 31 - v % 31, i.status = 113, m(i, v), 0 !== i.strstart && (m(i, e.adler >>> 16), m(i, 65535 & e.adler)), e.adler = 1 } if (69 === i.status) if (i.gzhead.extra) { for (o = i.pending; i.gzindex < (65535 & i.gzhead.extra.length) && (i.pending !== i.pending_buf_size || (i.gzhead.hcrc && i.pending > o && (e.adler = s(e.adler, i.pending_buf, i.pending - o, o)), f(e), o = i.pending, i.pending !== i.pending_buf_size));)p(i, 255 & i.gzhead.extra[i.gzindex]), i.gzindex++; i.gzhead.hcrc && i.pending > o && (e.adler = s(e.adler, i.pending_buf, i.pending - o, o)), i.gzindex === i.gzhead.extra.length && (i.gzindex = 0, i.status = 73) } else i.status = 73; if (73 === i.status) if (i.gzhead.name) { o = i.pending; do { if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > o && (e.adler = s(e.adler, i.pending_buf, i.pending - o, o)), f(e), o = i.pending, i.pending === i.pending_buf_size)) { l = 1; break } l = i.gzindex < i.gzhead.name.length ? 255 & i.gzhead.name.charCodeAt(i.gzindex++) : 0, p(i, l) } while (0 !== l); i.gzhead.hcrc && i.pending > o && (e.adler = s(e.adler, i.pending_buf, i.pending - o, o)), 0 === l && (i.gzindex = 0, i.status = 91) } else i.status = 91; if (91 === i.status) if (i.gzhead.comment) { o = i.pending; do { if (i.pending === i.pending_buf_size && (i.gzhead.hcrc && i.pending > o && (e.adler = s(e.adler, i.pending_buf, i.pending - o, o)), f(e), o = i.pending, i.pending === i.pending_buf_size)) { l = 1; break } l = i.gzindex < i.gzhead.comment.length ? 255 & i.gzhead.comment.charCodeAt(i.gzindex++) : 0, p(i, l) } while (0 !== l); i.gzhead.hcrc && i.pending > o && (e.adler = s(e.adler, i.pending_buf, i.pending - o, o)), 0 === l && (i.status = 103) } else i.status = 103; if (103 === i.status && (i.gzhead.hcrc ? (i.pending + 2 > i.pending_buf_size && f(e), i.pending + 2 <= i.pending_buf_size && (p(i, 255 & e.adler), p(i, e.adler >> 8 & 255), e.adler = 0, i.status = 113)) : i.status = 113), 0 !== i.pending) { if (f(e), 0 === e.avail_out) return i.last_flush = -1, 0 } else if (0 === e.avail_in && c(t) <= c(n) && 4 !== t) return u(e, -5); if (666 === i.status && 0 !== e.avail_in) return u(e, -5); if (0 !== e.avail_in || 0 !== i.lookahead || 0 !== t && 666 !== i.status) { var y = 2 === i.strategy ? function (e, t) { for (var n; ;) { if (0 === e.lookahead && (g(e), 0 === e.lookahead)) { if (0 === t) return 1; break } if (e.match_length = 0, n = a._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++, n && (h(e, !1), 0 === e.strm.avail_out)) return 1 } return e.insert = 0, 4 === t ? (h(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (h(e, !1), 0 === e.strm.avail_out) ? 1 : 2 }(i, t) : 3 === i.strategy ? function (e, t) { for (var n, r, i, o, s = e.window; ;) { if (e.lookahead <= 258) { if (g(e), e.lookahead <= 258 && 0 === t) return 1; if (0 === e.lookahead) break } if (e.match_length = 0, e.lookahead >= 3 && e.strstart > 0 && (r = s[i = e.strstart - 1]) === s[++i] && r === s[++i] && r === s[++i]) { o = e.strstart + 258; do { } while (r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && i < o); e.match_length = 258 - (o - i), e.match_length > e.lookahead && (e.match_length = e.lookahead) } if (e.match_length >= 3 ? (n = a._tr_tally(e, 1, e.match_length - 3), e.lookahead -= e.match_length, e.strstart += e.match_length, e.match_length = 0) : (n = a._tr_tally(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++), n && (h(e, !1), 0 === e.strm.avail_out)) return 1 } return e.insert = 0, 4 === t ? (h(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (h(e, !1), 0 === e.strm.avail_out) ? 1 : 2 }(i, t) : r[i.level].func(i, t); if (3 !== y && 4 !== y || (i.status = 666), 1 === y || 3 === y) return 0 === e.avail_out && (i.last_flush = -1), 0; if (2 === y && (1 === t ? a._tr_align(i) : 5 !== t && (a._tr_stored_block(i, 0, 0, !1), 3 === t && (d(i.head), 0 === i.lookahead && (i.strstart = 0, i.block_start = 0, i.insert = 0))), f(e), 0 === e.avail_out)) return i.last_flush = -1, 0 } return 4 !== t ? 0 : i.wrap <= 0 ? 1 : (2 === i.wrap ? (p(i, 255 & e.adler), p(i, e.adler >> 8 & 255), p(i, e.adler >> 16 & 255), p(i, e.adler >> 24 & 255), p(i, 255 & e.total_in), p(i, e.total_in >> 8 & 255), p(i, e.total_in >> 16 & 255), p(i, e.total_in >> 24 & 255)) : (m(i, e.adler >>> 16), m(i, 65535 & e.adler)), f(e), i.wrap > 0 && (i.wrap = -i.wrap), 0 !== i.pending ? 0 : 1) }, n.deflateEnd = function (e) { var t; return e && e.state ? 42 !== (t = e.state.status) && 69 !== t && 73 !== t && 91 !== t && 103 !== t && 113 !== t && 666 !== t ? u(e, -2) : (e.state = null, 113 === t ? u(e, -3) : 0) : -2 }, n.deflateSetDictionary = function (e, t) { var n, r, a, s, l, u, c, f, h = t.length; if (!e || !e.state) return -2; if (2 === (s = (n = e.state).wrap) || 1 === s && 42 !== n.status || n.lookahead) return -2; for (1 === s && (e.adler = o(e.adler, t, h, 0)), n.wrap = 0, h >= n.w_size && (0 === s && (d(n.head), n.strstart = 0, n.block_start = 0, n.insert = 0), f = new i.Buf8(n.w_size), i.arraySet(f, t, h - n.w_size, n.w_size, 0), t = f, h = n.w_size), l = e.avail_in, u = e.next_in, c = e.input, e.avail_in = h, e.next_in = 0, e.input = t, g(n); n.lookahead >= 3;) { r = n.strstart, a = n.lookahead - 2; do { n.ins_h = (n.ins_h << n.hash_shift ^ n.window[r + 3 - 1]) & n.hash_mask, n.prev[r & n.w_mask] = n.head[n.ins_h], n.head[n.ins_h] = r, r++ } while (--a); n.strstart = r, n.lookahead = 2, g(n) } return n.strstart += n.lookahead, n.block_start = n.strstart, n.insert = n.lookahead, n.lookahead = 0, n.match_length = n.prev_length = 2, n.match_available = 0, e.next_in = u, e.input = c, e.avail_in = l, n.wrap = s, 0 }, n.deflateInfo = "pako deflate (from Nodeca project)" }, { "../utils/common": 1, "./adler32": 3, "./crc32": 4, "./messages": 6, "./trees": 7 }], 6: [function (e, t, n) { t.exports = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" } }, {}], 7: [function (e, t, n) { var r = e("../utils/common"); function i(e) { for (var t = e.length; --t >= 0;)e[t] = 0 } var a = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0], o = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13], s = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7], l = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], u = new Array(576); i(u); var c = new Array(60); i(c); var d = new Array(512); i(d); var f = new Array(256); i(f); var h = new Array(29); i(h); var p, m, v, g = new Array(30); function y(e, t, n, r, i) { this.static_tree = e, this.extra_bits = t, this.extra_base = n, this.elems = r, this.max_length = i, this.has_stree = e && e.length } function _(e, t) { this.dyn_tree = e, this.max_code = 0, this.stat_desc = t } function b(e) { return e < 256 ? d[e] : d[256 + (e >>> 7)] } function w(e, t) { e.pending_buf[e.pending++] = 255 & t, e.pending_buf[e.pending++] = t >>> 8 & 255 } function k(e, t, n) { e.bi_valid > 16 - n ? (e.bi_buf |= t << e.bi_valid & 65535, w(e, e.bi_buf), e.bi_buf = t >> 16 - e.bi_valid, e.bi_valid += n - 16) : (e.bi_buf |= t << e.bi_valid & 65535, e.bi_valid += n) } function x(e, t, n) { k(e, n[2 * t], n[2 * t + 1]) } function S(e, t) { var n = 0; do { n |= 1 & e, e >>>= 1, n <<= 1 } while (--t > 0); return n >>> 1 } function E(e, t, n) { var r, i, a = new Array(16), o = 0; for (r = 1; r <= 15; r++)a[r] = o = o + n[r - 1] << 1; for (i = 0; i <= t; i++) { var s = e[2 * i + 1]; 0 !== s && (e[2 * i] = S(a[s]++, s)) } } function C(e) { var t; for (t = 0; t < 286; t++)e.dyn_ltree[2 * t] = 0; for (t = 0; t < 30; t++)e.dyn_dtree[2 * t] = 0; for (t = 0; t < 19; t++)e.bl_tree[2 * t] = 0; e.dyn_ltree[512] = 1, e.opt_len = e.static_len = 0, e.last_lit = e.matches = 0 } function I(e) { e.bi_valid > 8 ? w(e, e.bi_buf) : e.bi_valid > 0 && (e.pending_buf[e.pending++] = e.bi_buf), e.bi_buf = 0, e.bi_valid = 0 } function T(e, t, n, r) { var i = 2 * t, a = 2 * n; return e[i] < e[a] || e[i] === e[a] && r[t] <= r[n] } function N(e, t, n) { for (var r = e.heap[n], i = n << 1; i <= e.heap_len && (i < e.heap_len && T(t, e.heap[i + 1], e.heap[i], e.depth) && i++, !T(t, r, e.heap[i], e.depth));)e.heap[n] = e.heap[i], n = i, i <<= 1; e.heap[n] = r } function M(e, t, n) { var r, i, s, l, u = 0; if (0 !== e.last_lit) do { r = e.pending_buf[e.d_buf + 2 * u] << 8 | e.pending_buf[e.d_buf + 2 * u + 1], i = e.pending_buf[e.l_buf + u], u++, 0 === r ? x(e, i, t) : (x(e, (s = f[i]) + 256 + 1, t), 0 !== (l = a[s]) && k(e, i -= h[s], l), x(e, s = b(--r), n), 0 !== (l = o[s]) && k(e, r -= g[s], l)) } while (u < e.last_lit); x(e, 256, t) } function A(e, t) { var n, r, i, a = t.dyn_tree, o = t.stat_desc.static_tree, s = t.stat_desc.has_stree, l = t.stat_desc.elems, u = -1; for (e.heap_len = 0, e.heap_max = 573, n = 0; n < l; n++)0 !== a[2 * n] ? (e.heap[++e.heap_len] = u = n, e.depth[n] = 0) : a[2 * n + 1] = 0; for (; e.heap_len < 2;)a[2 * (i = e.heap[++e.heap_len] = u < 2 ? ++u : 0)] = 1, e.depth[i] = 0, e.opt_len--, s && (e.static_len -= o[2 * i + 1]); for (t.max_code = u, n = e.heap_len >> 1; n >= 1; n--)N(e, a, n); i = l; do { n = e.heap[1], e.heap[1] = e.heap[e.heap_len--], N(e, a, 1), r = e.heap[1], e.heap[--e.heap_max] = n, e.heap[--e.heap_max] = r, a[2 * i] = a[2 * n] + a[2 * r], e.depth[i] = (e.depth[n] >= e.depth[r] ? e.depth[n] : e.depth[r]) + 1, a[2 * n + 1] = a[2 * r + 1] = i, e.heap[1] = i++, N(e, a, 1) } while (e.heap_len >= 2); e.heap[--e.heap_max] = e.heap[1], function (e, t) { var n, r, i, a, o, s, l = t.dyn_tree, u = t.max_code, c = t.stat_desc.static_tree, d = t.stat_desc.has_stree, f = t.stat_desc.extra_bits, h = t.stat_desc.extra_base, p = t.stat_desc.max_length, m = 0; for (a = 0; a <= 15; a++)e.bl_count[a] = 0; for (l[2 * e.heap[e.heap_max] + 1] = 0, n = e.heap_max + 1; n < 573; n++)(a = l[2 * l[2 * (r = e.heap[n]) + 1] + 1] + 1) > p && (a = p, m++), l[2 * r + 1] = a, r > u || (e.bl_count[a]++, o = 0, r >= h && (o = f[r - h]), s = l[2 * r], e.opt_len += s * (a + o), d && (e.static_len += s * (c[2 * r + 1] + o))); if (0 !== m) { do { for (a = p - 1; 0 === e.bl_count[a];)a--; e.bl_count[a]--, e.bl_count[a + 1] += 2, e.bl_count[p]--, m -= 2 } while (m > 0); for (a = p; 0 !== a; a--)for (r = e.bl_count[a]; 0 !== r;)(i = e.heap[--n]) > u || (l[2 * i + 1] !== a && (e.opt_len += (a - l[2 * i + 1]) * l[2 * i], l[2 * i + 1] = a), r--) } }(e, t), E(a, u, e.bl_count) } function z(e, t, n) { var r, i, a = -1, o = t[1], s = 0, l = 7, u = 4; for (0 === o && (l = 138, u = 3), t[2 * (n + 1) + 1] = 65535, r = 0; r <= n; r++)i = o, o = t[2 * (r + 1) + 1], ++s < l && i === o || (s < u ? e.bl_tree[2 * i] += s : 0 !== i ? (i !== a && e.bl_tree[2 * i]++, e.bl_tree[32]++) : s <= 10 ? e.bl_tree[34]++ : e.bl_tree[36]++, s = 0, a = i, 0 === o ? (l = 138, u = 3) : i === o ? (l = 6, u = 3) : (l = 7, u = 4)) } function R(e, t, n) { var r, i, a = -1, o = t[1], s = 0, l = 7, u = 4; for (0 === o && (l = 138, u = 3), r = 0; r <= n; r++)if (i = o, o = t[2 * (r + 1) + 1], !(++s < l && i === o)) { if (s < u) do { x(e, i, e.bl_tree) } while (0 != --s); else 0 !== i ? (i !== a && (x(e, i, e.bl_tree), s--), x(e, 16, e.bl_tree), k(e, s - 3, 2)) : s <= 10 ? (x(e, 17, e.bl_tree), k(e, s - 3, 3)) : (x(e, 18, e.bl_tree), k(e, s - 11, 7)); s = 0, a = i, 0 === o ? (l = 138, u = 3) : i === o ? (l = 6, u = 3) : (l = 7, u = 4) } } i(g); var O = !1; function D(e, t, n, i) { k(e, 0 + (i ? 1 : 0), 3), function (e, t, n, i) { I(e), i && (w(e, n), w(e, ~n)), r.arraySet(e.pending_buf, e.window, t, n, e.pending), e.pending += n }(e, t, n, !0) } n._tr_init = function (e) { O || (function () { var e, t, n, r, i, l = new Array(16); for (n = 0, r = 0; r < 28; r++)for (h[r] = n, e = 0; e < 1 << a[r]; e++)f[n++] = r; for (f[n - 1] = r, i = 0, r = 0; r < 16; r++)for (g[r] = i, e = 0; e < 1 << o[r]; e++)d[i++] = r; for (i >>= 7; r < 30; r++)for (g[r] = i << 7, e = 0; e < 1 << o[r] - 7; e++)d[256 + i++] = r; for (t = 0; t <= 15; t++)l[t] = 0; for (e = 0; e <= 143;)u[2 * e + 1] = 8, e++, l[8]++; for (; e <= 255;)u[2 * e + 1] = 9, e++, l[9]++; for (; e <= 279;)u[2 * e + 1] = 7, e++, l[7]++; for (; e <= 287;)u[2 * e + 1] = 8, e++, l[8]++; for (E(u, 287, l), e = 0; e < 30; e++)c[2 * e + 1] = 5, c[2 * e] = S(e, 5); p = new y(u, a, 257, 286, 15), m = new y(c, o, 0, 30, 15), v = new y(new Array(0), s, 0, 19, 7) }(), O = !0), e.l_desc = new _(e.dyn_ltree, p), e.d_desc = new _(e.dyn_dtree, m), e.bl_desc = new _(e.bl_tree, v), e.bi_buf = 0, e.bi_valid = 0, C(e) }, n._tr_stored_block = D, n._tr_flush_block = function (e, t, n, r) { var i, a, o = 0; e.level > 0 ? (2 === e.strm.data_type && (e.strm.data_type = function (e) { var t, n = 4093624447; for (t = 0; t <= 31; t++, n >>>= 1)if (1 & n && 0 !== e.dyn_ltree[2 * t]) return 0; if (0 !== e.dyn_ltree[18] || 0 !== e.dyn_ltree[20] || 0 !== e.dyn_ltree[26]) return 1; for (t = 32; t < 256; t++)if (0 !== e.dyn_ltree[2 * t]) return 1; return 0 }(e)), A(e, e.l_desc), A(e, e.d_desc), o = function (e) { var t; for (z(e, e.dyn_ltree, e.l_desc.max_code), z(e, e.dyn_dtree, e.d_desc.max_code), A(e, e.bl_desc), t = 18; t >= 3 && 0 === e.bl_tree[2 * l[t] + 1]; t--); return e.opt_len += 3 * (t + 1) + 5 + 5 + 4, t }(e), i = e.opt_len + 3 + 7 >>> 3, (a = e.static_len + 3 + 7 >>> 3) <= i && (i = a)) : i = a = n + 5, n + 4 <= i && -1 !== t ? D(e, t, n, r) : 4 === e.strategy || a === i ? (k(e, 2 + (r ? 1 : 0), 3), M(e, u, c)) : (k(e, 4 + (r ? 1 : 0), 3), function (e, t, n, r) { var i; for (k(e, t - 257, 5), k(e, n - 1, 5), k(e, r - 4, 4), i = 0; i < r; i++)k(e, e.bl_tree[2 * l[i] + 1], 3); R(e, e.dyn_ltree, t - 1), R(e, e.dyn_dtree, n - 1) }(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, o + 1), M(e, e.dyn_ltree, e.dyn_dtree)), C(e), r && I(e) }, n._tr_tally = function (e, t, n) { return e.pending_buf[e.d_buf + 2 * e.last_lit] = t >>> 8 & 255, e.pending_buf[e.d_buf + 2 * e.last_lit + 1] = 255 & t, e.pending_buf[e.l_buf + e.last_lit] = 255 & n, e.last_lit++, 0 === t ? e.dyn_ltree[2 * n]++ : (e.matches++, t--, e.dyn_ltree[2 * (f[n] + 256 + 1)]++, e.dyn_dtree[2 * b(t)]++), e.last_lit === e.lit_bufsize - 1 }, n._tr_align = function (e) { k(e, 2, 3), x(e, 256, u), function (e) { 16 === e.bi_valid ? (w(e, e.bi_buf), e.bi_buf = 0, e.bi_valid = 0) : e.bi_valid >= 8 && (e.pending_buf[e.pending++] = 255 & e.bi_buf, e.bi_buf >>= 8, e.bi_valid -= 8) }(e) } }, { "../utils/common": 1 }], 8: [function (e, t, n) { t.exports = function () { this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0 } }, {}], "/lib/deflate.js": [function (e, t, n) { var r = e("./zlib/deflate"), i = e("./utils/common"), a = e("./utils/strings"), o = e("./zlib/messages"), s = e("./zlib/zstream"), l = Object.prototype.toString; function u(e) { if (!(this instanceof u)) return new u(e); this.options = i.assign({ level: -1, method: 8, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: 0, to: "" }, e || {}); var t = this.options; t.raw && t.windowBits > 0 ? t.windowBits = -t.windowBits : t.gzip && t.windowBits > 0 && t.windowBits < 16 && (t.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new s, this.strm.avail_out = 0; var n = r.deflateInit2(this.strm, t.level, t.method, t.windowBits, t.memLevel, t.strategy); if (0 !== n) throw new Error(o[n]); if (t.header && r.deflateSetHeader(this.strm, t.header), t.dictionary) { var c; if (c = "string" == typeof t.dictionary ? a.string2buf(t.dictionary) : "[object ArrayBuffer]" === l.call(t.dictionary) ? new Uint8Array(t.dictionary) : t.dictionary, 0 !== (n = r.deflateSetDictionary(this.strm, c))) throw new Error(o[n]); this._dict_set = !0 } } function c(e, t) { var n = new u(t); if (n.push(e, !0), n.err) throw n.msg || o[n.err]; return n.result } u.prototype.push = function (e, t) { var n, o, s = this.strm, u = this.options.chunkSize; if (this.ended) return !1; o = t === ~~t ? t : !0 === t ? 4 : 0, "string" == typeof e ? s.input = a.string2buf(e) : "[object ArrayBuffer]" === l.call(e) ? s.input = new Uint8Array(e) : s.input = e, s.next_in = 0, s.avail_in = s.input.length; do { if (0 === s.avail_out && (s.output = new i.Buf8(u), s.next_out = 0, s.avail_out = u), 1 !== (n = r.deflate(s, o)) && 0 !== n) return this.onEnd(n), this.ended = !0, !1; 0 !== s.avail_out && (0 !== s.avail_in || 4 !== o && 2 !== o) || ("string" === this.options.to ? this.onData(a.buf2binstring(i.shrinkBuf(s.output, s.next_out))) : this.onData(i.shrinkBuf(s.output, s.next_out))) } while ((s.avail_in > 0 || 0 === s.avail_out) && 1 !== n); return 4 === o ? (n = r.deflateEnd(this.strm), this.onEnd(n), this.ended = !0, 0 === n) : 2 !== o || (this.onEnd(0), s.avail_out = 0, !0) }, u.prototype.onData = function (e) { this.chunks.push(e) }, u.prototype.onEnd = function (e) { 0 === e && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = i.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg }, n.Deflate = u, n.deflate = c, n.deflateRaw = function (e, t) { return (t = t || {}).raw = !0, c(e, t) }, n.gzip = function (e, t) { return (t = t || {}).gzip = !0, c(e, t) } }, { "./utils/common": 1, "./utils/strings": 2, "./zlib/deflate": 5, "./zlib/messages": 6, "./zlib/zstream": 8 }] }, {}, [])("/lib/deflate.js") })).deflate, Me = ue((function (e, t) { e.exports = function e(t, n, r) { function i(o, s) { if (!n[o]) { if (!t[o]) { if (!s && le) return le(); if (a) return a(o, !0); var l = new Error("Cannot find module '" + o + "'"); throw l.code = "MODULE_NOT_FOUND", l } var u = n[o] = { exports: {} }; t[o][0].call(u.exports, (function (e) { return i(t[o][1][e] || e) }), u, u.exports, e, t, n, r) } return n[o].exports } for (var a = le, o = 0; o < r.length; o++)i(r[o]); return i }({ 1: [function (e, t, n) { var r = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array; function i(e, t) { return Object.prototype.hasOwnProperty.call(e, t) } n.assign = function (e) { for (var t = Array.prototype.slice.call(arguments, 1); t.length;) { var n = t.shift(); if (n) { if ("object" != typeof n) throw new TypeError(n + "must be non-object"); for (var r in n) i(n, r) && (e[r] = n[r]) } } return e }, n.shrinkBuf = function (e, t) { return e.length === t ? e : e.subarray ? e.subarray(0, t) : (e.length = t, e) }; var a = { arraySet: function (e, t, n, r, i) { if (t.subarray && e.subarray) e.set(t.subarray(n, n + r), i); else for (var a = 0; a < r; a++)e[i + a] = t[n + a] }, flattenChunks: function (e) { var t, n, r, i, a, o; for (r = 0, t = 0, n = e.length; t < n; t++)r += e[t].length; for (o = new Uint8Array(r), i = 0, t = 0, n = e.length; t < n; t++)a = e[t], o.set(a, i), i += a.length; return o } }, o = { arraySet: function (e, t, n, r, i) { for (var a = 0; a < r; a++)e[i + a] = t[n + a] }, flattenChunks: function (e) { return [].concat.apply([], e) } }; n.setTyped = function (e) { e ? (n.Buf8 = Uint8Array, n.Buf16 = Uint16Array, n.Buf32 = Int32Array, n.assign(n, a)) : (n.Buf8 = Array, n.Buf16 = Array, n.Buf32 = Array, n.assign(n, o)) }, n.setTyped(r) }, {}], 2: [function (e, t, n) { var r = e("./common"), i = !0, a = !0; try { String.fromCharCode.apply(null, [0]) } catch (e) { i = !1 } try { String.fromCharCode.apply(null, new Uint8Array(1)) } catch (e) { a = !1 } for (var o = new r.Buf8(256), s = 0; s < 256; s++)o[s] = s >= 252 ? 6 : s >= 248 ? 5 : s >= 240 ? 4 : s >= 224 ? 3 : s >= 192 ? 2 : 1; function l(e, t) { if (t < 65534 && (e.subarray && a || !e.subarray && i)) return String.fromCharCode.apply(null, r.shrinkBuf(e, t)); for (var n = "", o = 0; o < t; o++)n += String.fromCharCode(e[o]); return n } o[254] = o[254] = 1, n.string2buf = function (e) { var t, n, i, a, o, s = e.length, l = 0; for (a = 0; a < s; a++)55296 == (64512 & (n = e.charCodeAt(a))) && a + 1 < s && 56320 == (64512 & (i = e.charCodeAt(a + 1))) && (n = 65536 + (n - 55296 << 10) + (i - 56320), a++), l += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4; for (t = new r.Buf8(l), o = 0, a = 0; o < l; a++)55296 == (64512 & (n = e.charCodeAt(a))) && a + 1 < s && 56320 == (64512 & (i = e.charCodeAt(a + 1))) && (n = 65536 + (n - 55296 << 10) + (i - 56320), a++), n < 128 ? t[o++] = n : n < 2048 ? (t[o++] = 192 | n >>> 6, t[o++] = 128 | 63 & n) : n < 65536 ? (t[o++] = 224 | n >>> 12, t[o++] = 128 | n >>> 6 & 63, t[o++] = 128 | 63 & n) : (t[o++] = 240 | n >>> 18, t[o++] = 128 | n >>> 12 & 63, t[o++] = 128 | n >>> 6 & 63, t[o++] = 128 | 63 & n); return t }, n.buf2binstring = function (e) { return l(e, e.length) }, n.binstring2buf = function (e) { for (var t = new r.Buf8(e.length), n = 0, i = t.length; n < i; n++)t[n] = e.charCodeAt(n); return t }, n.buf2string = function (e, t) { var n, r, i, a, s = t || e.length, u = new Array(2 * s); for (r = 0, n = 0; n < s;)if ((i = e[n++]) < 128) u[r++] = i; else if ((a = o[i]) > 4) u[r++] = 65533, n += a - 1; else { for (i &= 2 === a ? 31 : 3 === a ? 15 : 7; a > 1 && n < s;)i = i << 6 | 63 & e[n++], a--; a > 1 ? u[r++] = 65533 : i < 65536 ? u[r++] = i : (i -= 65536, u[r++] = 55296 | i >> 10 & 1023, u[r++] = 56320 | 1023 & i) } return l(u, r) }, n.utf8border = function (e, t) { var n; for ((t = t || e.length) > e.length && (t = e.length), n = t - 1; n >= 0 && 128 == (192 & e[n]);)n--; return n < 0 || 0 === n ? t : n + o[e[n]] > t ? n : t } }, { "./common": 1 }], 3: [function (e, t, n) { t.exports = function (e, t, n, r) { for (var i = 65535 & e | 0, a = e >>> 16 & 65535 | 0, o = 0; 0 !== n;) { n -= o = n > 2e3 ? 2e3 : n; do { a = a + (i = i + t[r++] | 0) | 0 } while (--o); i %= 65521, a %= 65521 } return i | a << 16 | 0 } }, {}], 4: [function (e, t, n) { t.exports = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 } }, {}], 5: [function (e, t, n) { var r = function () { for (var e, t = [], n = 0; n < 256; n++) { e = n; for (var r = 0; r < 8; r++)e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1; t[n] = e } return t }(); t.exports = function (e, t, n, i) { var a = r, o = i + n; e ^= -1; for (var s = i; s < o; s++)e = e >>> 8 ^ a[255 & (e ^ t[s])]; return -1 ^ e } }, {}], 6: [function (e, t, n) { t.exports = function () { this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1 } }, {}], 7: [function (e, t, n) { t.exports = function (e, t) { var n, r, i, a, o, s, l, u, c, d, f, h, p, m, v, g, y, _, b, w, k, x, S, E, C; n = e.state, r = e.next_in, E = e.input, i = r + (e.avail_in - 5), a = e.next_out, C = e.output, o = a - (t - e.avail_out), s = a + (e.avail_out - 257), l = n.dmax, u = n.wsize, c = n.whave, d = n.wnext, f = n.window, h = n.hold, p = n.bits, m = n.lencode, v = n.distcode, g = (1 << n.lenbits) - 1, y = (1 << n.distbits) - 1; e: do { p < 15 && (h += E[r++] << p, p += 8, h += E[r++] << p, p += 8), _ = m[h & g]; t: for (; ;) { if (h >>>= b = _ >>> 24, p -= b, 0 == (b = _ >>> 16 & 255)) C[a++] = 65535 & _; else { if (!(16 & b)) { if (0 == (64 & b)) { _ = m[(65535 & _) + (h & (1 << b) - 1)]; continue t } if (32 & b) { n.mode = 12; break e } e.msg = "invalid literal/length code", n.mode = 30; break e } w = 65535 & _, (b &= 15) && (p < b && (h += E[r++] << p, p += 8), w += h & (1 << b) - 1, h >>>= b, p -= b), p < 15 && (h += E[r++] << p, p += 8, h += E[r++] << p, p += 8), _ = v[h & y]; n: for (; ;) { if (h >>>= b = _ >>> 24, p -= b, !(16 & (b = _ >>> 16 & 255))) { if (0 == (64 & b)) { _ = v[(65535 & _) + (h & (1 << b) - 1)]; continue n } e.msg = "invalid distance code", n.mode = 30; break e } if (k = 65535 & _, p < (b &= 15) && (h += E[r++] << p, (p += 8) < b && (h += E[r++] << p, p += 8)), (k += h & (1 << b) - 1) > l) { e.msg = "invalid distance too far back", n.mode = 30; break e } if (h >>>= b, p -= b, k > (b = a - o)) { if ((b = k - b) > c && n.sane) { e.msg = "invalid distance too far back", n.mode = 30; break e } if (x = 0, S = f, 0 === d) { if (x += u - b, b < w) { w -= b; do { C[a++] = f[x++] } while (--b); x = a - k, S = C } } else if (d < b) { if (x += u + d - b, (b -= d) < w) { w -= b; do { C[a++] = f[x++] } while (--b); if (x = 0, d < w) { w -= b = d; do { C[a++] = f[x++] } while (--b); x = a - k, S = C } } } else if (x += d - b, b < w) { w -= b; do { C[a++] = f[x++] } while (--b); x = a - k, S = C } for (; w > 2;)C[a++] = S[x++], C[a++] = S[x++], C[a++] = S[x++], w -= 3; w && (C[a++] = S[x++], w > 1 && (C[a++] = S[x++])) } else { x = a - k; do { C[a++] = C[x++], C[a++] = C[x++], C[a++] = C[x++], w -= 3 } while (w > 2); w && (C[a++] = C[x++], w > 1 && (C[a++] = C[x++])) } break } } break } } while (r < i && a < s); r -= w = p >> 3, h &= (1 << (p -= w << 3)) - 1, e.next_in = r, e.next_out = a, e.avail_in = r < i ? i - r + 5 : 5 - (r - i), e.avail_out = a < s ? s - a + 257 : 257 - (a - s), n.hold = h, n.bits = p } }, {}], 8: [function (e, t, n) { var r = e("../utils/common"), i = e("./adler32"), a = e("./crc32"), o = e("./inffast"), s = e("./inftrees"); function l(e) { return (e >>> 24 & 255) + (e >>> 8 & 65280) + ((65280 & e) << 8) + ((255 & e) << 24) } function u() { this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new r.Buf16(320), this.work = new r.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0 } function c(e) { var t; return e && e.state ? (t = e.state, e.total_in = e.total_out = t.total = 0, e.msg = "", t.wrap && (e.adler = 1 & t.wrap), t.mode = 1, t.last = 0, t.havedict = 0, t.dmax = 32768, t.head = null, t.hold = 0, t.bits = 0, t.lencode = t.lendyn = new r.Buf32(852), t.distcode = t.distdyn = new r.Buf32(592), t.sane = 1, t.back = -1, 0) : -2 } function d(e) { var t; return e && e.state ? ((t = e.state).wsize = 0, t.whave = 0, t.wnext = 0, c(e)) : -2 } function f(e, t) { var n, r; return e && e.state ? (r = e.state, t < 0 ? (n = 0, t = -t) : (n = 1 + (t >> 4), t < 48 && (t &= 15)), t && (t < 8 || t > 15) ? -2 : (null !== r.window && r.wbits !== t && (r.window = null), r.wrap = n, r.wbits = t, d(e))) : -2 } function h(e, t) { var n, r; return e ? (r = new u, e.state = r, r.window = null, 0 !== (n = f(e, t)) && (e.state = null), n) : -2 } var p, m, v = !0; function g(e) { if (v) { var t; for (p = new r.Buf32(512), m = new r.Buf32(32), t = 0; t < 144;)e.lens[t++] = 8; for (; t < 256;)e.lens[t++] = 9; for (; t < 280;)e.lens[t++] = 7; for (; t < 288;)e.lens[t++] = 8; for (s(1, e.lens, 0, 288, p, 0, e.work, { bits: 9 }), t = 0; t < 32;)e.lens[t++] = 5; s(2, e.lens, 0, 32, m, 0, e.work, { bits: 5 }), v = !1 } e.lencode = p, e.lenbits = 9, e.distcode = m, e.distbits = 5 } function y(e, t, n, i) { var a, o = e.state; return null === o.window && (o.wsize = 1 << o.wbits, o.wnext = 0, o.whave = 0, o.window = new r.Buf8(o.wsize)), i >= o.wsize ? (r.arraySet(o.window, t, n - o.wsize, o.wsize, 0), o.wnext = 0, o.whave = o.wsize) : ((a = o.wsize - o.wnext) > i && (a = i), r.arraySet(o.window, t, n - i, a, o.wnext), (i -= a) ? (r.arraySet(o.window, t, n - i, i, 0), o.wnext = i, o.whave = o.wsize) : (o.wnext += a, o.wnext === o.wsize && (o.wnext = 0), o.whave < o.wsize && (o.whave += a))), 0 } n.inflateReset = d, n.inflateReset2 = f, n.inflateResetKeep = c, n.inflateInit = function (e) { return h(e, 15) }, n.inflateInit2 = h, n.inflate = function (e, t) { var n, u, c, d, f, h, p, m, v, _, b, w, k, x, S, E, C, I, T, N, M, A, z, R, O = 0, D = new r.Buf8(4), L = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]; if (!e || !e.state || !e.output || !e.input && 0 !== e.avail_in) return -2; 12 === (n = e.state).mode && (n.mode = 13), f = e.next_out, c = e.output, p = e.avail_out, d = e.next_in, u = e.input, h = e.avail_in, m = n.hold, v = n.bits, _ = h, b = p, A = 0; e: for (; ;)switch (n.mode) { case 1: if (0 === n.wrap) { n.mode = 13; break } for (; v < 16;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } if (2 & n.wrap && 35615 === m) { n.check = 0, D[0] = 255 & m, D[1] = m >>> 8 & 255, n.check = a(n.check, D, 2, 0), m = 0, v = 0, n.mode = 2; break } if (n.flags = 0, n.head && (n.head.done = !1), !(1 & n.wrap) || (((255 & m) << 8) + (m >> 8)) % 31) { e.msg = "incorrect header check", n.mode = 30; break } if (8 != (15 & m)) { e.msg = "unknown compression method", n.mode = 30; break } if (v -= 4, M = 8 + (15 & (m >>>= 4)), 0 === n.wbits) n.wbits = M; else if (M > n.wbits) { e.msg = "invalid window size", n.mode = 30; break } n.dmax = 1 << M, e.adler = n.check = 1, n.mode = 512 & m ? 10 : 12, m = 0, v = 0; break; case 2: for (; v < 16;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } if (n.flags = m, 8 != (255 & n.flags)) { e.msg = "unknown compression method", n.mode = 30; break } if (57344 & n.flags) { e.msg = "unknown header flags set", n.mode = 30; break } n.head && (n.head.text = m >> 8 & 1), 512 & n.flags && (D[0] = 255 & m, D[1] = m >>> 8 & 255, n.check = a(n.check, D, 2, 0)), m = 0, v = 0, n.mode = 3; case 3: for (; v < 32;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } n.head && (n.head.time = m), 512 & n.flags && (D[0] = 255 & m, D[1] = m >>> 8 & 255, D[2] = m >>> 16 & 255, D[3] = m >>> 24 & 255, n.check = a(n.check, D, 4, 0)), m = 0, v = 0, n.mode = 4; case 4: for (; v < 16;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } n.head && (n.head.xflags = 255 & m, n.head.os = m >> 8), 512 & n.flags && (D[0] = 255 & m, D[1] = m >>> 8 & 255, n.check = a(n.check, D, 2, 0)), m = 0, v = 0, n.mode = 5; case 5: if (1024 & n.flags) { for (; v < 16;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } n.length = m, n.head && (n.head.extra_len = m), 512 & n.flags && (D[0] = 255 & m, D[1] = m >>> 8 & 255, n.check = a(n.check, D, 2, 0)), m = 0, v = 0 } else n.head && (n.head.extra = null); n.mode = 6; case 6: if (1024 & n.flags && ((w = n.length) > h && (w = h), w && (n.head && (M = n.head.extra_len - n.length, n.head.extra || (n.head.extra = new Array(n.head.extra_len)), r.arraySet(n.head.extra, u, d, w, M)), 512 & n.flags && (n.check = a(n.check, u, w, d)), h -= w, d += w, n.length -= w), n.length)) break e; n.length = 0, n.mode = 7; case 7: if (2048 & n.flags) { if (0 === h) break e; w = 0; do { M = u[d + w++], n.head && M && n.length < 65536 && (n.head.name += String.fromCharCode(M)) } while (M && w < h); if (512 & n.flags && (n.check = a(n.check, u, w, d)), h -= w, d += w, M) break e } else n.head && (n.head.name = null); n.length = 0, n.mode = 8; case 8: if (4096 & n.flags) { if (0 === h) break e; w = 0; do { M = u[d + w++], n.head && M && n.length < 65536 && (n.head.comment += String.fromCharCode(M)) } while (M && w < h); if (512 & n.flags && (n.check = a(n.check, u, w, d)), h -= w, d += w, M) break e } else n.head && (n.head.comment = null); n.mode = 9; case 9: if (512 & n.flags) { for (; v < 16;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } if (m !== (65535 & n.check)) { e.msg = "header crc mismatch", n.mode = 30; break } m = 0, v = 0 } n.head && (n.head.hcrc = n.flags >> 9 & 1, n.head.done = !0), e.adler = n.check = 0, n.mode = 12; break; case 10: for (; v < 32;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } e.adler = n.check = l(m), m = 0, v = 0, n.mode = 11; case 11: if (0 === n.havedict) return e.next_out = f, e.avail_out = p, e.next_in = d, e.avail_in = h, n.hold = m, n.bits = v, 2; e.adler = n.check = 1, n.mode = 12; case 12: if (5 === t || 6 === t) break e; case 13: if (n.last) { m >>>= 7 & v, v -= 7 & v, n.mode = 27; break } for (; v < 3;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } switch (n.last = 1 & m, v -= 1, 3 & (m >>>= 1)) { case 0: n.mode = 14; break; case 1: if (g(n), n.mode = 20, 6 === t) { m >>>= 2, v -= 2; break e } break; case 2: n.mode = 17; break; case 3: e.msg = "invalid block type", n.mode = 30 }m >>>= 2, v -= 2; break; case 14: for (m >>>= 7 & v, v -= 7 & v; v < 32;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } if ((65535 & m) != (m >>> 16 ^ 65535)) { e.msg = "invalid stored block lengths", n.mode = 30; break } if (n.length = 65535 & m, m = 0, v = 0, n.mode = 15, 6 === t) break e; case 15: n.mode = 16; case 16: if (w = n.length) { if (w > h && (w = h), w > p && (w = p), 0 === w) break e; r.arraySet(c, u, d, w, f), h -= w, d += w, p -= w, f += w, n.length -= w; break } n.mode = 12; break; case 17: for (; v < 14;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } if (n.nlen = 257 + (31 & m), m >>>= 5, v -= 5, n.ndist = 1 + (31 & m), m >>>= 5, v -= 5, n.ncode = 4 + (15 & m), m >>>= 4, v -= 4, n.nlen > 286 || n.ndist > 30) { e.msg = "too many length or distance symbols", n.mode = 30; break } n.have = 0, n.mode = 18; case 18: for (; n.have < n.ncode;) { for (; v < 3;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } n.lens[L[n.have++]] = 7 & m, m >>>= 3, v -= 3 } for (; n.have < 19;)n.lens[L[n.have++]] = 0; if (n.lencode = n.lendyn, n.lenbits = 7, z = { bits: n.lenbits }, A = s(0, n.lens, 0, 19, n.lencode, 0, n.work, z), n.lenbits = z.bits, A) { e.msg = "invalid code lengths set", n.mode = 30; break } n.have = 0, n.mode = 19; case 19: for (; n.have < n.nlen + n.ndist;) { for (; E = (O = n.lencode[m & (1 << n.lenbits) - 1]) >>> 16 & 255, C = 65535 & O, !((S = O >>> 24) <= v);) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } if (C < 16) m >>>= S, v -= S, n.lens[n.have++] = C; else { if (16 === C) { for (R = S + 2; v < R;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } if (m >>>= S, v -= S, 0 === n.have) { e.msg = "invalid bit length repeat", n.mode = 30; break } M = n.lens[n.have - 1], w = 3 + (3 & m), m >>>= 2, v -= 2 } else if (17 === C) { for (R = S + 3; v < R;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } v -= S, M = 0, w = 3 + (7 & (m >>>= S)), m >>>= 3, v -= 3 } else { for (R = S + 7; v < R;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } v -= S, M = 0, w = 11 + (127 & (m >>>= S)), m >>>= 7, v -= 7 } if (n.have + w > n.nlen + n.ndist) { e.msg = "invalid bit length repeat", n.mode = 30; break } for (; w--;)n.lens[n.have++] = M } } if (30 === n.mode) break; if (0 === n.lens[256]) { e.msg = "invalid code -- missing end-of-block", n.mode = 30; break } if (n.lenbits = 9, z = { bits: n.lenbits }, A = s(1, n.lens, 0, n.nlen, n.lencode, 0, n.work, z), n.lenbits = z.bits, A) { e.msg = "invalid literal/lengths set", n.mode = 30; break } if (n.distbits = 6, n.distcode = n.distdyn, z = { bits: n.distbits }, A = s(2, n.lens, n.nlen, n.ndist, n.distcode, 0, n.work, z), n.distbits = z.bits, A) { e.msg = "invalid distances set", n.mode = 30; break } if (n.mode = 20, 6 === t) break e; case 20: n.mode = 21; case 21: if (h >= 6 && p >= 258) { e.next_out = f, e.avail_out = p, e.next_in = d, e.avail_in = h, n.hold = m, n.bits = v, o(e, b), f = e.next_out, c = e.output, p = e.avail_out, d = e.next_in, u = e.input, h = e.avail_in, m = n.hold, v = n.bits, 12 === n.mode && (n.back = -1); break } for (n.back = 0; E = (O = n.lencode[m & (1 << n.lenbits) - 1]) >>> 16 & 255, C = 65535 & O, !((S = O >>> 24) <= v);) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } if (E && 0 == (240 & E)) { for (I = S, T = E, N = C; E = (O = n.lencode[N + ((m & (1 << I + T) - 1) >> I)]) >>> 16 & 255, C = 65535 & O, !(I + (S = O >>> 24) <= v);) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } m >>>= I, v -= I, n.back += I } if (m >>>= S, v -= S, n.back += S, n.length = C, 0 === E) { n.mode = 26; break } if (32 & E) { n.back = -1, n.mode = 12; break } if (64 & E) { e.msg = "invalid literal/length code", n.mode = 30; break } n.extra = 15 & E, n.mode = 22; case 22: if (n.extra) { for (R = n.extra; v < R;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } n.length += m & (1 << n.extra) - 1, m >>>= n.extra, v -= n.extra, n.back += n.extra } n.was = n.length, n.mode = 23; case 23: for (; E = (O = n.distcode[m & (1 << n.distbits) - 1]) >>> 16 & 255, C = 65535 & O, !((S = O >>> 24) <= v);) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } if (0 == (240 & E)) { for (I = S, T = E, N = C; E = (O = n.distcode[N + ((m & (1 << I + T) - 1) >> I)]) >>> 16 & 255, C = 65535 & O, !(I + (S = O >>> 24) <= v);) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } m >>>= I, v -= I, n.back += I } if (m >>>= S, v -= S, n.back += S, 64 & E) { e.msg = "invalid distance code", n.mode = 30; break } n.offset = C, n.extra = 15 & E, n.mode = 24; case 24: if (n.extra) { for (R = n.extra; v < R;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } n.offset += m & (1 << n.extra) - 1, m >>>= n.extra, v -= n.extra, n.back += n.extra } if (n.offset > n.dmax) { e.msg = "invalid distance too far back", n.mode = 30; break } n.mode = 25; case 25: if (0 === p) break e; if (w = b - p, n.offset > w) { if ((w = n.offset - w) > n.whave && n.sane) { e.msg = "invalid distance too far back", n.mode = 30; break } w > n.wnext ? (w -= n.wnext, k = n.wsize - w) : k = n.wnext - w, w > n.length && (w = n.length), x = n.window } else x = c, k = f - n.offset, w = n.length; w > p && (w = p), p -= w, n.length -= w; do { c[f++] = x[k++] } while (--w); 0 === n.length && (n.mode = 21); break; case 26: if (0 === p) break e; c[f++] = n.length, p--, n.mode = 21; break; case 27: if (n.wrap) { for (; v < 32;) { if (0 === h) break e; h--, m |= u[d++] << v, v += 8 } if (b -= p, e.total_out += b, n.total += b, b && (e.adler = n.check = n.flags ? a(n.check, c, b, f - b) : i(n.check, c, b, f - b)), b = p, (n.flags ? m : l(m)) !== n.check) { e.msg = "incorrect data check", n.mode = 30; break } m = 0, v = 0 } n.mode = 28; case 28: if (n.wrap && n.flags) { for (; v < 32;) { if (0 === h) break e; h--, m += u[d++] << v, v += 8 } if (m !== (4294967295 & n.total)) { e.msg = "incorrect length check", n.mode = 30; break } m = 0, v = 0 } n.mode = 29; case 29: A = 1; break e; case 30: A = -3; break e; case 31: return -4; case 32: default: return -2 }return e.next_out = f, e.avail_out = p, e.next_in = d, e.avail_in = h, n.hold = m, n.bits = v, (n.wsize || b !== e.avail_out && n.mode < 30 && (n.mode < 27 || 4 !== t)) && y(e, e.output, e.next_out, b - e.avail_out), _ -= e.avail_in, b -= e.avail_out, e.total_in += _, e.total_out += b, n.total += b, n.wrap && b && (e.adler = n.check = n.flags ? a(n.check, c, b, e.next_out - b) : i(n.check, c, b, e.next_out - b)), e.data_type = n.bits + (n.last ? 64 : 0) + (12 === n.mode ? 128 : 0) + (20 === n.mode || 15 === n.mode ? 256 : 0), (0 === _ && 0 === b || 4 === t) && 0 === A && (A = -5), A }, n.inflateEnd = function (e) { if (!e || !e.state) return -2; var t = e.state; return t.window && (t.window = null), e.state = null, 0 }, n.inflateGetHeader = function (e, t) { var n; return e && e.state ? 0 == (2 & (n = e.state).wrap) ? -2 : (n.head = t, t.done = !1, 0) : -2 }, n.inflateSetDictionary = function (e, t) { var n, r = t.length; return e && e.state ? 0 !== (n = e.state).wrap && 11 !== n.mode ? -2 : 11 === n.mode && i(1, t, r, 0) !== n.check ? -3 : y(e, t, r, r) ? (n.mode = 31, -4) : (n.havedict = 1, 0) : -2 }, n.inflateInfo = "pako inflate (from Nodeca project)" }, { "../utils/common": 1, "./adler32": 3, "./crc32": 5, "./inffast": 7, "./inftrees": 9 }], 9: [function (e, t, n) { var r = e("../utils/common"), i = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0], a = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78], o = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0], s = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]; t.exports = function (e, t, n, l, u, c, d, f) { var h, p, m, v, g, y, _, b, w, k = f.bits, x = 0, S = 0, E = 0, C = 0, I = 0, T = 0, N = 0, M = 0, A = 0, z = 0, R = null, O = 0, D = new r.Buf16(16), L = new r.Buf16(16), B = null, F = 0; for (x = 0; x <= 15; x++)D[x] = 0; for (S = 0; S < l; S++)D[t[n + S]]++; for (I = k, C = 15; C >= 1 && 0 === D[C]; C--); if (I > C && (I = C), 0 === C) return u[c++] = 20971520, u[c++] = 20971520, f.bits = 1, 0; for (E = 1; E < C && 0 === D[E]; E++); for (I < E && (I = E), M = 1, x = 1; x <= 15; x++)if (M <<= 1, (M -= D[x]) < 0) return -1; if (M > 0 && (0 === e || 1 !== C)) return -1; for (L[1] = 0, x = 1; x < 15; x++)L[x + 1] = L[x] + D[x]; for (S = 0; S < l; S++)0 !== t[n + S] && (d[L[t[n + S]]++] = S); if (0 === e ? (R = B = d, y = 19) : 1 === e ? (R = i, O -= 257, B = a, F -= 257, y = 256) : (R = o, B = s, y = -1), z = 0, S = 0, x = E, g = c, T = I, N = 0, m = -1, v = (A = 1 << I) - 1, 1 === e && A > 852 || 2 === e && A > 592) return 1; for (; ;) { _ = x - N, d[S] < y ? (b = 0, w = d[S]) : d[S] > y ? (b = B[F + d[S]], w = R[O + d[S]]) : (b = 96, w = 0), h = 1 << x - N, E = p = 1 << T; do { u[g + (z >> N) + (p -= h)] = _ << 24 | b << 16 | w | 0 } while (0 !== p); for (h = 1 << x - 1; z & h;)h >>= 1; if (0 !== h ? (z &= h - 1, z += h) : z = 0, S++, 0 == --D[x]) { if (x === C) break; x = t[n + d[S]] } if (x > I && (z & v) !== m) { for (0 === N && (N = I), g += E, M = 1 << (T = x - N); T + N < C && !((M -= D[T + N]) <= 0);)T++, M <<= 1; if (A += 1 << T, 1 === e && A > 852 || 2 === e && A > 592) return 1; u[m = z & v] = I << 24 | T << 16 | g - c | 0 } } return 0 !== z && (u[g + z] = x - N << 24 | 64 << 16 | 0), f.bits = I, 0 } }, { "../utils/common": 1 }], 10: [function (e, t, n) { t.exports = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" } }, {}], 11: [function (e, t, n) { t.exports = function () { this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0 } }, {}], "/lib/inflate.js": [function (e, t, n) { var r = e("./zlib/inflate"), i = e("./utils/common"), a = e("./utils/strings"), o = e("./zlib/constants"), s = e("./zlib/messages"), l = e("./zlib/zstream"), u = e("./zlib/gzheader"), c = Object.prototype.toString; function d(e) { if (!(this instanceof d)) return new d(e); this.options = i.assign({ chunkSize: 16384, windowBits: 0, to: "" }, e || {}); var t = this.options; t.raw && t.windowBits >= 0 && t.windowBits < 16 && (t.windowBits = -t.windowBits, 0 === t.windowBits && (t.windowBits = -15)), !(t.windowBits >= 0 && t.windowBits < 16) || e && e.windowBits || (t.windowBits += 32), t.windowBits > 15 && t.windowBits < 48 && 0 == (15 & t.windowBits) && (t.windowBits |= 15), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new l, this.strm.avail_out = 0; var n = r.inflateInit2(this.strm, t.windowBits); if (n !== o.Z_OK) throw new Error(s[n]); if (this.header = new u, r.inflateGetHeader(this.strm, this.header), t.dictionary && ("string" == typeof t.dictionary ? t.dictionary = a.string2buf(t.dictionary) : "[object ArrayBuffer]" === c.call(t.dictionary) && (t.dictionary = new Uint8Array(t.dictionary)), t.raw && (n = r.inflateSetDictionary(this.strm, t.dictionary)) !== o.Z_OK)) throw new Error(s[n]) } function f(e, t) { var n = new d(t); if (n.push(e, !0), n.err) throw n.msg || s[n.err]; return n.result } d.prototype.push = function (e, t) { var n, s, l, u, d, f = this.strm, h = this.options.chunkSize, p = this.options.dictionary, m = !1; if (this.ended) return !1; s = t === ~~t ? t : !0 === t ? o.Z_FINISH : o.Z_NO_FLUSH, "string" == typeof e ? f.input = a.binstring2buf(e) : "[object ArrayBuffer]" === c.call(e) ? f.input = new Uint8Array(e) : f.input = e, f.next_in = 0, f.avail_in = f.input.length; do { if (0 === f.avail_out && (f.output = new i.Buf8(h), f.next_out = 0, f.avail_out = h), (n = r.inflate(f, o.Z_NO_FLUSH)) === o.Z_NEED_DICT && p && (n = r.inflateSetDictionary(this.strm, p)), n === o.Z_BUF_ERROR && !0 === m && (n = o.Z_OK, m = !1), n !== o.Z_STREAM_END && n !== o.Z_OK) return this.onEnd(n), this.ended = !0, !1; f.next_out && (0 !== f.avail_out && n !== o.Z_STREAM_END && (0 !== f.avail_in || s !== o.Z_FINISH && s !== o.Z_SYNC_FLUSH) || ("string" === this.options.to ? (l = a.utf8border(f.output, f.next_out), u = f.next_out - l, d = a.buf2string(f.output, l), f.next_out = u, f.avail_out = h - u, u && i.arraySet(f.output, f.output, l, u, 0), this.onData(d)) : this.onData(i.shrinkBuf(f.output, f.next_out)))), 0 === f.avail_in && 0 === f.avail_out && (m = !0) } while ((f.avail_in > 0 || 0 === f.avail_out) && n !== o.Z_STREAM_END); return n === o.Z_STREAM_END && (s = o.Z_FINISH), s === o.Z_FINISH ? (n = r.inflateEnd(this.strm), this.onEnd(n), this.ended = !0, n === o.Z_OK) : s !== o.Z_SYNC_FLUSH || (this.onEnd(o.Z_OK), f.avail_out = 0, !0) }, d.prototype.onData = function (e) { this.chunks.push(e) }, d.prototype.onEnd = function (e) { e === o.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = i.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg }, n.Inflate = d, n.inflate = f, n.inflateRaw = function (e, t) { return (t = t || {}).raw = !0, f(e, t) }, n.ungzip = f }, { "./utils/common": 1, "./utils/strings": 2, "./zlib/constants": 4, "./zlib/gzheader": 6, "./zlib/inflate": 8, "./zlib/messages": 10, "./zlib/zstream": 11 }] }, {}, [])("/lib/inflate.js") })).inflate; return e.Replayer = Ie, e.addCustomEvent = Te, e.mirror = z, e.pack = function (e) { var t = n(n({}, e), { v: "v1" }); return Ne(JSON.stringify(t), { to: "string" }) }, e.record = ae, e.unpack = function (e) { if ("string" != typeof e) return e; try { if ((t = JSON.parse(e)).timestamp) return t } catch (e) { } try { var t; if ("v1" === (t = JSON.parse(Me(e, { to: "string" }))).v) return t; throw new Error("These events were packed with packer " + t.v + " which is incompatible with current packer v1.") } catch (e) { throw console.error(e), new Error("Unknown data format.") } }, e.utils = V, e
}({});
